(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1002:function(t,e,n){"use strict";var i=n(941);n.n(i).a},1003:function(t,e,n){"use strict";var i=n(942);n.n(i).a},1004:function(t,e,n){"use strict";var i=n(943);n.n(i).a},1005:function(t,e,n){"use strict";var i=n(944);n.n(i).a},1006:function(t,e,n){"use strict";var i=n(945);n.n(i).a},1007:function(t,e,n){"use strict";var i=n(946);n.n(i).a},1008:function(t,e,n){"use strict";var i=n(947);n.n(i).a},1009:function(t,e,n){"use strict";var i=n(948);n.n(i).a},1013:function(t,e,n){"use strict";var i=n(949);n.n(i).a},1014:function(t,e,n){"use strict";var i=n(950);n.n(i).a},1015:function(t,e,n){"use strict";var i=n(951);n.n(i).a},1016:function(t,e,n){"use strict";var i=n(952);n.n(i).a},1029:function(t,e,n){"use strict";var i=n(954);n.n(i).a},1035:function(t,e,n){"use strict";var i=n(955);n.n(i).a},1036:function(t,e,n){"use strict";var i=n(956);n.n(i).a},1048:function(t,e,n){"use strict";var i=n(958);n.n(i).a},1049:function(t,e,n){"use strict";var i=n(959);n.n(i).a},1050:function(t,e,n){"use strict";var i=n(960);n.n(i).a},1051:function(t,e,n){"use strict";var i=n(961);n.n(i).a},1052:function(t,e,n){"use strict";var i=n(962);n.n(i).a},1053:function(t,e,n){"use strict";var i=n(963);n.n(i).a},1054:function(t,e,n){"use strict";var i=n(964);n.n(i).a},1058:function(t,e,n){"use strict";var i=n(965);n.n(i).a},1059:function(t,e,n){"use strict";var i=n(966);n.n(i).a},1060:function(t,e,n){"use strict";var i=n(967);n.n(i).a},1061:function(t,e,n){"use strict";var i=n(968);n.n(i).a},1062:function(t,e,n){"use strict";var i=n(969);n.n(i).a},1063:function(t,e,n){"use strict";var i=n(970);n.n(i).a},1064:function(t,e,n){"use strict";var i=n(971);n.n(i).a},1065:function(t,e,n){"use strict";var i=n(972);n.n(i).a},1066:function(t,e,n){"use strict";var i=n(973);n.n(i).a},1067:function(t,e,n){"use strict";var i=n(974);n.n(i).a},1068:function(t,e,n){"use strict";var i=n(975);n.n(i).a},1069:function(t,e,n){"use strict";var i=n(976);n.n(i).a},1070:function(t,e,n){"use strict";var i=n(977);n.n(i).a},1071:function(t,e,n){"use strict";var i=n(978);n.n(i).a},1072:function(t,e,n){"use strict";var i=n(979);n.n(i).a},1073:function(t,e,n){"use strict";var i=n(980);n.n(i).a},1074:function(t,e,n){"use strict";var i=n(981);n.n(i).a},1075:function(t,e,n){"use strict";var i=n(982);n.n(i).a},1076:function(t,e,n){"use strict";var i=n(983);n.n(i).a},1077:function(t,e,n){"use strict";var i=n(984);n.n(i).a},1078:function(t,e,n){"use strict";var i=n(985);n.n(i).a},1079:function(t,e,n){"use strict";var i=n(986);n.n(i).a},1080:function(t,e,n){"use strict";var i=n(987);n.n(i).a},934:function(t,e,n){"use strict";n.r(e);var i=n(54),o=n.n(i),s=n(58),r=n.n(s),a=n(42),c=n.n(a),l=n(23),u=n.n(l),h=n(43),f=n.n(h),d=n(57),p=n.n(d),m=n(44),v=n.n(m),g=n(51),b=n.n(g),y=n(39),x=n.n(y),w=n(243),_=n(148);function k(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=k(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=k(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var S={name:"Undo",computed:z({},Object(w.mapGetters)("snapshot",["undoEnable"])),methods:z({undo:function(){this.undoEnable&&this[_.c]()}},Object(w.mapMutations)("snapshot",[_.c]))},j=(n(1002),n(53)),O=Object(j.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{class:["tool-container",!this.undoEnable&&"disabled"],on:{click:this.undo}},[e("orange-icon",{attrs:{type:"icon-undo"}}),this._v(" "),e("span",[this._v("撤销")])],1)}),[],!1,null,"cfe11d26",null).exports;function E(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=E(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=E(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var L={name:"Redo",computed:C({},Object(w.mapGetters)("snapshot",["redoEnable"])),methods:C({redo:function(){this.redoEnable&&this[_.b]()}},Object(w.mapMutations)("snapshot",[_.b]))},$=(n(1003),Object(j.a)(L,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{class:["tool-container",!this.redoEnable&&"disabled"],on:{click:this.redo}},[e("orange-icon",{attrs:{type:"icon-redo"}}),this._v(" "),e("span",[this._v("重做")])],1)}),[],!1,null,"30e931e8",null).exports),M="large",A="normal",I="small",N=n(76),T=n.n(N),P=n(93),X=n(185),Y=n(133),D=n(46),W=n.n(D),R=n(63),G=n.n(R),H=n(27),B=n.n(H),U=n(31),V=n.n(U),q=function(t,e){var n;return u()(n=b()(t)).call(n,(function(n){return e(t[n],n)}))},F=n(129),J=n.n(F),Z=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return J()(e).call(e,(function(t,e){return function(){return t(e.apply(void 0,arguments))}}))},K=n(486),Q=function(){function t(e){var n,i=e.title,o=e.key,s=e.divider,r=void 0!==s&&s,a=e.props,c=void 0===a?{}:a,l=e.events,u=void 0===l?{}:l,h=e.icon,f=void 0===h?{}:h,d=e.text,p=void 0===d?"":d,m=e.dataSource,v=void 0===m?{}:m,g=e.children,b=void 0===g?null:g,y=e.menu,x=void 0===y?null:y,w=e.init,_=void 0===w?Y.b:w,k=e.destroy,z=void 0===k?Y.b:k;B()(this,t),this.title=i,this.key=o,this.divider=r,this.props=c,this.events=u,this.icon=f,this.text=p,this.eventEmitter=new K.a,this.dataSource=v,this.children=b,this.menu=x,this.destroy=z,G()(n=this).call(n),_.call(this)}return V()(t,[{key:"bind",value:function(){var t=this;q(this.events,(function(e,n){t.events[n]=G()(e).call(e,t)}))}},{key:"on",value:function(t,e){var n=this;this.events[t]?this.events[t]=Z(this.events[t],(function(){n.emit(t)})):this.events[t]=function(){n.emit(t)},this.eventEmitter.on(t,e)}},{key:"off",value:function(t,e){this.eventEmitter.off(t,e)}},{key:"emit",value:function(t){for(var e,n,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];(e=this.eventEmitter).emit.apply(e,W()(n=[t]).call(n,o))}},{key:"depend",value:function(t){var e;this.menu=t,this.children&&u()(e=this.children).call(e,(function(e){e.depend(t)}))}},{key:"destroy",value:function(){this.destroy()}}]),t}(),tt=n(312),et=n(126),nt=n(65);new Q({title:"放大",key:"enlarge",events:{click:function(){}}}),new Q({title:"缩小",key:"narrow",divider:!0,events:{click:function(){}}}),new Q({title:"适应画布",key:"fitCavnas",events:{click:function(){}}}),new Q({title:"缩放至选区",key:"zoom2area",events:{click:function(){}}});var it=function(t){return new Q({title:"".concat(100*t,"%"),key:"zoom".concat(100*t),icon:{left:{type:"check",visible:!1}},dataSource:{zoom:t,watch:Y.b},events:{click:function(){!function(t,e){P.a.commit("global/".concat(tt.a),{log:{source:"zoom -> menu",reason:"当点击缩放菜单的".concat(e,"子菜单项时需要更改屏幕容器宽高")},update:function(e){var n=e.screen.container,i=t/P.a.state.canvas.zoom;n.width=T()(n.width)*i+"px",n.height=T()(n.height)*i+"px"}}),P.a.commit("canvas/".concat(et.a),{log:{source:"zoom -> menu",reason:"当点击缩放菜单的".concat(e,"子菜单项时需要更改zoom值和画布宽高")},update:function(e){var n=t/e.zoom;e.zoom=t,e.width=T()(e.width)*n+"px",e.height=T()(e.height)*n+"px"}}),X.a.emit(nt.h,{log:{source:"zoom -> menu",reason:"修改组件缩放因子值"},update:function(e){var n;u()(n=e.widgets).call(n,(function(e){e.zoom=t}))}})}(this.dataSource.zoom,"".concat(100*t,"%"))}},init:function(){var t=this;this.dataSource.unwatch=P.a.watch((function(t){return t.canvas.zoom}),(function(e){t.icon.left.visible=e===t.dataSource.zoom}))},destroy:function(){this.dataSource.unwatch()}})},ot=(it(.5),it(1));ot.icon.left.visible=!0;var st=it(2),rt={props:{width:{type:String,default:"240px"},size:{type:String,default:A},menus:{type:Array,default:function(){return[]}}}},at=n(102);function ct(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ct(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ct(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var ut={name:"MenuItem",isMenuItem:!0,props:lt(lt({},at.a.Item.props),{},{size:{type:String,default:A},dataSource:{type:Object,required:!0}})},ht=Object(j.a)(ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-menu-item",t._g(t._b({key:t.dataSource.key,class:t.size},"a-menu-item",t.$props,!1),t.$listeners),[t.dataSource.icon.left&&t.dataSource.icon.left.visible?n("a-icon",{staticClass:"left-icon",attrs:{type:t.dataSource.icon.left.type}}):t._e(),t._v(" "),n("span",[t._v(t._s(t.dataSource.title))]),t._v(" "),t.dataSource.icon.right&&t.dataSource.icon.right.visible?n("a-icon",{staticClass:"right-icon",attrs:{type:t.dataSource.icon.right.type}}):t._e()],1)}),[],!1,null,null,null).exports;function ft(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ft(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ft(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var pt={name:"SubMenu",isSubMenu:!0,components:{MenuItem:ht},props:dt(dt({},at.a.SubMenu.props),{},{popupClassName:{type:String,default:"orange-menu-popup"},popupOffset:{type:Array,default:function(){return[0,-4]}},size:{type:String,default:A},dataSource:{type:Object,default:function(){return{}}}})},mt={name:"OrangeMenu",components:{MenuItem:ht,SubMenu:Object(j.a)(pt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-sub-menu",t._g(t._b({key:t.dataSource.key,class:t.size,scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(t.dataSource.title))])]},proxy:!0}])},"a-sub-menu",t.$props,!1),t.$listeners),[t._v(" "),t._l(t.dataSource.children,(function(e){return[e.children?n("sub-menu",t._g(t._b({key:e.key,attrs:{size:t.size,"data-source":e}},"sub-menu",e.props,!1),e.events)):n("menu-item",t._g(t._b({key:e.key,attrs:{size:t.size,"data-source":e}},"menu-item",e.props,!1),e.events)),t._v(" "),e.divider?n("a-menu-divider",{key:e.key+"-divider"}):t._e()]}))],2)}),[],!1,null,null,null).exports},mixins:[rt],computed:{hasLeftIcon:function(){var t;return p()(t=this.menus).call(t,(function(t){return t.icon&&t.icon.left})).length}},methods:{click:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this.$emit.apply(this,W()(t=["click"]).call(t,n))}}},vt=(n(1004),Object(j.a)(mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-menu",{class:["orange-menu",t.hasLeftIcon&&"hasLeftIcon"],style:{width:t.width},attrs:{mode:"vertical"},on:{click:t.click}},[t._l(t.menus,(function(e){return[e.children?n("sub-menu",t._g(t._b({key:e.key,attrs:{size:t.size,"data-source":e}},"sub-menu",e.props,!1),e.events)):n("menu-item",t._g(t._b({key:e.key,attrs:{size:t.size,"data-source":e}},"menu-item",e.props,!1),e.events)),t._v(" "),e.divider?n("a-menu-divider",{key:e.key+"-divider"}):t._e()]}))],2)}),[],!1,null,null,null).exports),gt={name:"DropMenu",components:{OrangeMenu:vt},mixins:[rt],data:function(){return{visible:!1}},methods:{visibleChange:function(t){this.visible=t}}};n(1005);function bt(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}var yt={name:"Zoom",components:{DropdownMenu:Object(j.a)(gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-dropdown",{attrs:{"transition-name":"","overlay-class-name":"dropdown-menu",placement:"bottomCenter"},on:{visibleChange:t.visibleChange},scopedSlots:t._u([{key:"overlay",fn:function(){return[n("div",{style:{width:t.width}},[t._t("menu-extra"),t._v(" "),n("orange-menu",{attrs:{width:t.width,size:t.size,menus:t.menus}})],2)]},proxy:!0}],null,!0),model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t._t("default",null,{visible:t.visible})],2)}),[],!1,null,null,null).exports},data:function(){return{size:M,menus:[ot,st]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=bt(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=bt(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}({},Object(w.mapState)("canvas",{zoom:function(t){return t.zoom}}))},xt=(n(1006),Object(j.a)(yt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dropdown-menu",{attrs:{width:"160px",size:t.size,menus:t.menus},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.visible;return[n("li",{class:["tool-container",i&&"active"],style:{width:"68px"}},[n("div",{staticClass:"zoom-container"},[n("span",[t._v(t._s(100*t.zoom)+"%")]),t._v(" "),n("orange-icon",{staticClass:"arrow",attrs:{type:"icon-arrowup"}})],1),t._v(" "),n("span",[t._v("缩放")])])]}}])})}),[],!1,null,"93f45cde",null).exports),wt=n(313),_t=n.n(wt),kt=n(120),zt=n.n(kt),St=n(18).default.prototype.$axios;var jt={getCanvasData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.params,n=void 0===e?{}:e,i=t.headers,o=void 0===i?{}:i;return St.get("/api/data",{headers:o,params:n})},saveCanvasData:function(t,e){return St.post("/api/save",t,e)}},Ot={name:"Save",data:function(){return{loading:!1}},computed:{widgets:function(){return X.a.widgets}},methods:{save:function(){var t,e=this,n=zt()(t=X.a.widgets).call(t,(function(t){return t.save()}));_t()(n).call(n,(function(t,e){return t.container.style.zIndex-e.container.style.zIndex})),u()(n).call(n,(function(t,e){t.container.style.zIndex=e+1})),this.loading=!0,jt.saveCanvasData({widgets:n,zIndex:n.length+1}).then((function(t){t.data.code?e.$message.error("保存失败!"):e.$message.success("保存成功!")})).finally((function(){e.loading=!1}))}}},Et=(n(1007),Object(j.a)(Ot,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{class:["tool-container",this.loading&&"disabled"],on:{click:this.save}},[e("a-icon",{attrs:{type:"save"}}),this._v(" "),e("span",[this._v("保存")])],1)}),[],!1,null,"1811e90a",null).exports),Ct=n(276),Lt={name:"Run",computed:{widgets:function(){return X.a.widgets}},methods:{play:function(){X.a.emit(nt.h,{log:{source:"layouts -> header -> components -> run",reason:"跳转到预览页面需要设置组件的缩放因子为1"},update:function(t){var e;u()(e=t.widgets).call(e,(function(t){t.zoom=1}))}}),this.$router.push({name:Ct.b,params:{widgets:this.widgets}})}}},$t=(n(1008),Object(j.a)(Lt,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{class:["tool-container",!this.widgets.length&&"disabled"],on:{click:this.play}},[e("a-icon",{attrs:{type:"play-circle"}}),this._v(" "),e("span",[this._v("运行")])],1)}),[],!1,null,"44487944",null).exports),Mt={name:"WorkspaceHeader",data:function(){return{items:[O,$,xt,Et,$t]}}},At=(n(1009),Object(j.a)(Mt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workspace-header"},[e("ul",{staticClass:"toolbar"},this._l(this.items,(function(t){return e(t,{key:t.name,tag:"component"})})),1)])}),[],!1,null,"602feaac",null).exports),It={icon:"图标",text:"文本",rectangle:"矩形",button:"按钮",input:"输入框",inputNumber:"数字输入框",radio:"单选框",checkbox:"多选框",select:"选择框",cascader:"级联选择器",orangeSwitch:"开关"},Nt=n(488),Tt=n(991),Pt=n.n(Tt),Xt=n(72),Yt=n(32),Dt=n(297),Wt=n.n(Dt),Rt=n(127),Gt=n(103),Ht={name:"Widget",props:{dataSource:{type:Object,required:!0}},data:function(){return{classList:[Gt.b]}},methods:{addClass:function(t){var e;Wt()(e=this.classList).call(e,t)||this.classList.push(t)},removeClass:function(t){var e;Wt()(e=this.classList).call(e,t)&&Object(Rt.a)(this.classList,t)}}},Bt=(n(1013),Object(j.a)(Ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._g(t._b({class:t.classList,style:t.dataSource.container.style,attrs:{id:t.dataSource.id}},"div",t.dataSource.container.props,!1),t.dataSource.container.events),[n(t.dataSource.is,t._g(t._b({ref:"component",tag:"component",style:t.dataSource.component.style,scopedSlots:t._u([{key:"default",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)},"component",t.dataSource.component.props,!1),t.dataSource.component.events))],1)}),[],!1,null,"0294aba4",null).exports),Ut={name:"DragWidget",components:{Widget:Bt},props:{dataSource:{type:Object,required:!0}},mounted:function(){this.addEventListener()},beforeDestroy:function(){var t=this.$el;Object(Xt.a)(t,"dragstart",this.dragstart),Object(Xt.a)(t,"dragend",this.dragend)},methods:{dragstart:function(t){t.target.style.transform="translateZ(0)",t.dataTransfer.setData("dataSource",Pt()({id:t.target.id,offsetX:t.offsetX,offsetY:t.offsetY})),Yt.m.$emit(Yt.l)},dragend:function(t){t.target.style.transform="",Yt.m.$emit(Yt.k)},addEventListener:function(){var t=this.$el;Object(Xt.b)(t,"dragstart",this.dragstart),Object(Xt.b)(t,"dragend",this.dragend)}}};function Vt(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=Vt(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=Vt(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var Ft={name:"WorkspaceLeftPanel",components:{DragWidget:Object(j.a)(Ut,(function(){var t=this.$createElement,e=this._self._c||t;return e("widget",{attrs:{"data-source":this.dataSource}},this._l(this.dataSource.children,(function(t){return e("drag-widget",{key:t.id,attrs:{"data-source":t}})})),1)}),[],!1,null,null,null).exports},data:function(){return{activeKey:"text"}},computed:qt({widgetCategories:function(){var t,e=this;return zt()(t=b()(this.widget)).call(t,(function(t){var n;return{category:t,text:It[t],widgetList:zt()(n=b()(e.widget[t])).call(n,(function(n){return e.widget[t][n]}))}}))}},Object(w.mapState)("widget",{widget:function(t){return t}})),methods:qt({change:function(t){this.activeKey=t}},Object(w.mapMutations)("widget",[Nt.a]))},Jt=(n(1014),n(1015),Object(j.a)(Ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace-left-panel"},[n("a-tabs",{attrs:{"tab-position":"left","default-active-key":t.activeKey},on:{change:t.change}},t._l(t.widgetCategories,(function(e){var i=e.category,o=e.text,s=e.widgetList;return n("a-tab-pane",{key:i,attrs:{tab:o}},[n("ul",{staticClass:"widget-list"},t._l(s,(function(t){return n("li",{key:t.id,staticClass:"widget-item"},[n("drag-widget",{attrs:{"data-source":t,draggable:""}})],1)})),0)])})),1)],1)}),[],!1,null,"3181464c",null).exports),Zt=function(){function t(e){var n=e.vm;B()(this,t),this.dataSource=null,this.event=null,this.items=[],this.vm=n}return V()(t,[{key:"setData",value:function(t){var e=this,n=t.dataSource,i=void 0===n?null:n,o=t.event,s=void 0===o?null:o,r=t.items,a=void 0===r?[]:r;this.dataSource=i,this.event=s,this.items=a,u()(a).call(a,(function(t){t.depend(e)}))}},{key:"destroy",value:function(){var t;this.dataSource=null,this.event=null,this.vm=null,u()(t=this.items).call(t,(function(t){t.destroy()})),this.items=[]}}]),t}(),Kt={data:function(){var t=new Zt({vm:this});return x()({},"GET_MENU_INSTANCE",(function(){return t}))},computed:x()({},"MENU_INSTANCE",(function(){return this.GET_MENU_INSTANCE()})),mounted:function(){Yt.m.$on(Yt.e,this.contextmenu)},beforeDestroy:function(){Yt.m.$off(Yt.e,this.contextmenu),this.MENU_INSTANCE.destroy()}},Qt={mixins:[Kt],data:function(){return{config:null}},mounted:function(){var t,e,n,i,o,s,r,a;this.config=(t=new Q({title:"剪切",key:"cut",events:{click:function(){X.a.emit(nt.c,{log:{source:"mouseWidget -> mixins -> menu -> config -> cut",reason:"剪切操作删除组件"},widget:this.menu.dataSource})}}}),e=new Q({title:"复制",key:"copy"}),n=new Q({title:"到画布",key:"paste2canvas",events:{click:function(){var t=o.dataSource.widget.clone(),e=o.dataSource.position,n=e.top,i=e.left;t.container.style.top="".concat(n,"px"),t.container.style.left="".concat(i,"px"),X.a.emit(nt.b,{widget:t,log:{source:"mouseWidget -> mixins -> menu -> config -> paste2canvas",reason:"新增组件"}})}}}),i=new Q({title:"到鼠标位置",key:"paste2mouse",events:{click:function(){var t=this.menu.event,e=t.target,n=t.offsetX,i=t.offsetY,s=o.dataSource.widget.clone(),r=s.container.style,a=0,c=0;if(e[e.id]){var l=e[e.id].position2canvas();a=l.top,c=l.left}r.top=a+i+"px",r.left=c+n+"px",X.a.emit(nt.b,{log:{source:"mouseWidget -> mixins -> menu -> config -> paste2mouse",reason:"新增组件"},widget:s})}}}),o=new Q({title:"粘贴",key:"paste",props:{disabled:!0},dataSource:{widget:null,position:null,unwatch:Y.b},init:function(){var n=this,i=function(){n.dataSource.unwatch();var t=n.menu.dataSource.position2canvas(),e=n.menu.dataSource.clone();e.parent=null;var i=P.a.watch((function(t){return t.canvas.zoom}),(function(n){var i=n/e.zoom;e.zoom=n;var o=t.top,s=t.left;t.top=Math.floor(o*i),t.left=Math.floor(s*i)}));n.dataSource={widget:e,position:t,unwatch:i},n.props.disabled=!1};t.on("click",i),e.on("click",i)},children:[n,i],destroy:function(){this.dataSource.unwatch()}}),s=new Q({title:"删除",key:"remove",divider:!0,events:{click:function(){X.a.emit(nt.c,{log:{source:"mouseWidget -> mixins -> menu -> config -> remove",reason:"删除组件"},widget:this.menu.dataSource})}}}),r=new Q({title:"置顶",key:"toTop",events:{click:function(){X.a.emit(nt.g,{log:{source:"mouseWidget -> mixins -> menu -> config -> toTop",reason:"修改组件的zIndex值"},widget:this.menu.dataSource})}}}),a=new Q({title:"置底",key:"toBottom",events:{click:function(){X.a.emit(nt.f,{log:{source:"mouseWidget -> mixins -> menu -> config -> toBottom",reason:"修改组件的zIndex值"},widget:this.menu.dataSource})}}}),{cut:t,copy:e,paste:o,remove:s,toTop:r,toBottom:a})},methods:{contextmenu:function(t){var e=t.target;if(e.dataset.hovermenu){var n=e[e.id],i=this.MENU_INSTANCE,o=this.config,s=o.cut,r=o.copy,a=o.paste,c=o.remove,l=o.toTop,u=o.toBottom,h=null;h=n?[s,r,a,c,l,u]:[a],i.setData({items:h,dataSource:n,event:t}),this.$refs.hoverMenu.setData({menus:i.items,position:{top:t.clientY,left:t.clientX}})}}}},te={name:"Grid",props:{smallGridSize:{type:Number,default:10},bigGridSize:{type:Number,default:50}}};function ee(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}var ne,ie,oe={name:"CanvasGrid",components:{Grid:Object(j.a)(te,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("pattern",{attrs:{id:"smallGrid",width:t.smallGridSize,height:t.smallGridSize,patternUnits:"userSpaceOnUse"}},[n("path",{attrs:{d:"M "+t.smallGridSize+" 0 L 0 0 0 "+t.smallGridSize,fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),t._v(" "),n("pattern",{attrs:{id:"grid",width:t.bigGridSize,height:t.bigGridSize,patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:t.bigGridSize,height:t.bigGridSize,fill:"url(#smallGrid)"}}),t._v(" "),n("path",{attrs:{d:"M "+t.bigGridSize+" 0 L 0 0 0 "+t.bigGridSize,fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),t._v(" "),n("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])}),[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ee(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ee(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}({smallGridSize:function(){return this.interval*this.zoom},bigGridSize:function(){return 5*this.smallGridSize}},Object(w.mapState)("canvas",{interval:function(t){return t.interval},zoom:function(t){return t.zoom},grid:function(t){return t.grid}}))},se=(n(1016),Object(j.a)(oe,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"grid-container"},[e("grid",{directives:[{name:"show",rawName:"v-show",value:this.grid,expression:"grid"}],attrs:{"small-grid-size":this.smallGridSize,"big-grid-size":this.bigGridSize}})],1)}),[],!1,null,"c8a2feaa",null).exports),re=n(564),ae={name:"MouseWidget",components:{Widget:Bt},props:{dataSource:{type:Object,required:!0}},mounted:function(){this.dataSource.container.emit("bootstrap",{vm:this.$refs.widget}),Yt.m.$on(Yt.e,this.contextmenu),this.dataSource.props.editable.move&&this.addEventListener()},beforeDestroy:function(){Yt.m.$off(Yt.e,this.contextmenu),this.dataSource.props.editable.move&&this.removeEventListener()},methods:{mousedown:function(t){if(function(t){return 0===t.button||1===t.which}(t)&&(t.target===this.$el||t.target===this.$el.firstChild)){var e=this.$el;e.position={startX:e.offsetLeft,startY:e.offsetTop,clientX:t.clientX,clientY:t.clientY},Object(re.b)(e),Yt.m.$emit(Yt.b),Yt.m.$on(Yt.h,this.mouseup)}},mouseup:function(t,e){if(Yt.m.$off(Yt.h,this.mouseup),e){var n=t.style,i=n.top,o=n.left,s=t.position,r=s.startX,a=s.startY,c=this.dataSource.zoom;this.dataSource.container.emit("snapshot",{log:{source:"mouseWidget -> mouseup",reason:"移动组件后修改样式并添加快照"},update:function(t){var e=t.widget.container.style;e.top=i,e.left=o},snapshot:{undo:function(t){var e=t.widget,n=e.zoom,i=e.container.style,o=n/c;i.top=Math.floor(a*o)+"px",i.left=Math.floor(r*o)+"px"},redo:function(t){var e=t.widget,n=e.zoom,s=e.container.style,r=n/c;s.top=Math.floor(T()(i,10)*r)+"px",s.left=Math.floor(T()(o,10)*r)+"px"}}})}},contextmenu:function(t){t.target!==this.$el&&t.target!==this.$el.firstChild||(Yt.m.$emit(Yt.c,this.$el),Yt.m.$emit(Yt.a,this.dataSource))},addEventListener:function(){var t=this.$el;Object(Xt.b)(t,"mousedown",this.mousedown)},removeEventListener:function(){var t=this.$el;Object(Xt.a)(t,"mousedown",this.mousedown)}}},ce=Object(j.a)(ae,(function(){var t=this.$createElement,e=this._self._c||t;return e("widget",{ref:"widget",attrs:{"data-source":this.dataSource}},this._l(this.dataSource.children,(function(t){return e("mouse-widget",{key:t.id,attrs:{"data-source":t}})})),1)}),[],!1,null,null,null).exports,le=n(307),ue=n(481),he=n.n(ue),fe=n(180),de=n.n(fe),pe=n(953),me=n.n(pe);function ve(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ve(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ve(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var be,ye=(ne={},x()(ne,le.b.yAxis,{targetFilter:function(t){return{top:t.top,bottom:t.top+t.height,yl:t.left,yc:t.left+t.width/2,yr:t.left+t.width}},neighborFilter:function(t){return{top:t.top,right:t.left+t.width,bottom:t.top+t.height,left:t.left,center:t.left+t.width/2}},setPlainLine:function(t,e){t.style.top=e.startPoint+"px",t.style.left=e.locatePoint+"px",t.style.height=e.endPoint-e.startPoint+"px"},setDistanceLine:function(t,e,n){var i;t.push.apply(t,me()(zt()(i=e.distanceLines).call(i,(function(t){return{style:{top:t.startPoint+"px",left:t.locatePoint+"px",width:"1px",height:t.endPoint-t.startPoint+"px"},direction:le.b.yAxis,interval:Math.floor((t.endPoint-t.startPoint)/n)}}))))}}),x()(ne,le.b.xAxis,{targetFilter:function(t){return{top:t.left,bottom:t.left+t.width,xt:t.top,xc:t.top+t.height/2,xb:t.top+t.height}},neighborFilter:function(t){return{top:t.left,right:t.top,bottom:t.left+t.width,left:t.top+t.height,center:t.top+t.height/2}},setPlainLine:function(t,e){t.style.top=e.locatePoint+"px",t.style.left=e.startPoint+"px",t.style.width=e.endPoint-e.startPoint+"px"},setDistanceLine:function(t,e,n){var i;t.push.apply(t,me()(zt()(i=e.distanceLines).call(i,(function(t){return{style:{top:t.locatePoint+"px",left:t.startPoint+"px",width:t.endPoint-t.startPoint+"px",height:"1px"},direction:le.b.xAxis,interval:Math.floor((t.endPoint-t.startPoint)/n)}}))))}}),ne),xe=(ie={},x()(ie,le.b.yAxis,["yl","yc","yr"]),x()(ie,le.b.xAxis,["xt","xc","xb"]),ie),we=new(function(){function t(){B()(this,t),this.identification=null,this.target=null,this.neighbors=[],this.associateNodes=[]}return V()(t,[{key:"collinear",value:function(t,e){return t.left===e||t.center===e||t.right===e}},{key:"plainLinePoint",value:function(){var t;_t()(t=this.associateNodes).call(t,(function(t,e){return t.top-e.top}));for(var e=this.associateNodes[0],n=e.top,i=e.bottom,o=1;o<this.associateNodes.length;o+=1)(e=this.associateNodes[o]).bottom>=i&&(i=e.bottom);return n>=this.target.top&&(n=this.target.top),i<=this.target.bottom&&(i=this.target.bottom),{startPoint:n,endPoint:i}}},{key:"distanceLinePoint",value:function(t,e){return{startPoint:t,endPoint:e}}},{key:"distanceLines",value:function(){var t,e=[],n=this.target.top,i=this.target.bottom;u()(t=this.associateNodes).call(t,(function(t){t.top!==n&&t.top!==i&&e.push(t.top),t.bottom!==n&&t.bottom!==i&&e.push(t.bottom)}));var o=[];if(!e.length)return o;e.push(n,i),_t()(e).call(e,(function(t,e){return t-e}));var s=de()(e).call(e,n),r=he()(e).call(e,i);return 1===r?(o.push(this.distanceLinePoint(e[r],e[r+1])),o):s===e.length-2?(o.push(this.distanceLinePoint(e[s-1],e[s])),o):r-s==1?(o.push(this.distanceLinePoint(e[s-1],e[s])),o.push(this.distanceLinePoint(e[r],e[r+1])),o):(0===s?o.push(this.distanceLinePoint(e[s],e[s+1])):o.push(this.distanceLinePoint(e[s-1],e[s])),o.push(this.distanceLinePoint(e[r-1],e[r])),o)}},{key:"line",value:function(){var t,e,n=this,i=this.target[this.identification];if(this.associateNodes.length=0,u()(t=this.neighbors).call(t,(function(t){n.collinear(t,i)&&n.associateNodes.push(t)})),!this.associateNodes.length)return null;var o=this.plainLinePoint(),s=o.startPoint,r=o.endPoint;return{locatePoint:i,startPoint:s,endPoint:r,distanceLines:zt()(e=this.distanceLines()).call(e,(function(t){return ge(ge({},t),{},{locatePoint:i})}))}}},{key:"adsorb",value:function(t,e){for(var n=this.target[this.identification],i=0;i<this.neighbors.length;i+=1){var o=void 0;if(Math.abs(o=this.neighbors[i].left-n)<=3||Math.abs(o=this.neighbors[i].center-n)<=3||Math.abs(o=this.neighbors[i].right-n)<=3)return t||e(o),!0}return!1}}]),t}()),_e=(be={},x()(be,le.b.yAxis,{neighbors:null}),x()(be,le.b.xAxis,{neighbors:null}),be),ke={name:"MarkLine",props:{zoom:{type:Number,default:1},rect:{type:Object,required:!0}},data:function(){var t,e;return{markline:!1,plainLine:J()(t=W()(e=xe[le.b.xAxis]).call(e,xe[le.b.yAxis])).call(t,(function(t,e){return t[e]={visible:!1,adsorb:!1,style:{top:0,left:0,width:"1px",height:"1px"}},t}),{}),distanceLines:[]}},mounted:function(){Object(Xt.b)(document,"mousemove",this.mousemove),Object(Xt.b)(document,"mouseup",this.mouseup)},beforeDestroy:function(){Object(Xt.a)(document,"mousemove",this.mousemove),Object(Xt.a)(document,"mouseup",this.mouseup)},methods:{setData:function(t){var e,n=t.neighbors;this.markline=!0,u()(e=[le.b.xAxis,le.b.yAxis]).call(e,(function(t){_e[t].neighbors=zt()(n).call(n,(function(e){return ye[t].neighborFilter(e)}))}))},mousemove:function(){var t,e=this;this.markline&&(this.distanceLines.length=0,u()(t=[le.b.xAxis,le.b.yAxis]).call(t,(function(t){var n,i=ye[t],o=i.targetFilter,s=i.setPlainLine,r=i.setDistanceLine;we.target=o(e.rect),we.neighbors=_e[t].neighbors,u()(n=xe[t]).call(n,(function(n){var i=e.plainLine[n];we.identification=n,i.adsorb=we.adsorb(i.adsorb,(function(n){e.$emit("adsorb",t,n),we.target=o(e.rect)}));var a=we.line();a?(i.visible=!0,s(i,a),r(e.distanceLines,a,e.zoom)):i.visible=!1}))})))},mouseup:function(){this.markline&&(this.markline=!1,q(this.plainLine,(function(t){t.visible=!1})),this.distanceLines.length=0,q(_e,(function(t){t.neighbors=null})))}}};n(1029);function ze(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}var Se={name:"CanvasMarkLine",components:{MarkLine:Object(j.a)(ke,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mark-line-container"},[t._l(Object.keys(t.plainLine),(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.plainLine[e].visible,expression:"plainLine[identification].visible"}],key:e,staticClass:"mark-line plain",style:t.plainLine[e].style})})),t._v(" "),t._l(t.distanceLines,(function(t,e){return n("div",{key:e,class:["mark-line","distance",t.direction],style:t.style,attrs:{"data-distance":t.interval}})}))],2)}),[],!1,null,"e4ef6a72",null).exports},data:function(){return{rect:{top:0,left:0,width:0,height:0}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ze(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ze(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}({widgets:function(){return X.a.widgets},markLine:function(){return this.$refs.markLine}},Object(w.mapState)("canvas",{zoom:function(t){return t.zoom}})),mounted:function(){Yt.m.$on(Yt.b,this.mousedown),Yt.m.$on(Yt.g,this.mousemove)},beforeDestroy:function(){Yt.m.$off(Yt.b,this.mousedown),Yt.m.$off(Yt.g,this.mousemove)},methods:{mousedown:function(){var t,e=Object(re.a)(),n=e[e.id];this.$emit("adjust",{widget:n,el:this.markLine.$el});var i=e.offsetWidth,o=e.offsetHeight,s=e.offsetTop,r=e.offsetLeft;this.rect.top=s,this.rect.left=r,this.rect.width=i,this.rect.height=o;var a=n.parent?n.parent.children:this.widgets;this.markLine.setData({neighbors:zt()(t=p()(a).call(a,(function(t){return t!==n}))).call(t,(function(t){var e=t.container,n=t.component;return{top:T()(e.style.top,10),left:T()(e.style.left,10),width:T()(n.style.width,10),height:T()(n.style.height,10)}}))})},mousemove:function(){var t=Object(re.a)(),e=t.offsetTop,n=t.offsetLeft;this.rect.top=e,this.rect.left=n},adsorb:function(t,e){var n=Object(re.a)();t===le.b.yAxis?(this.rect.left+=e,n.style.left=this.rect.left+"px",n.position.startX+=e):(this.rect.top+=e,n.style.top=this.rect.top+"px",n.position.startY+=e)}}},je=Object(j.a)(Se,(function(){var t=this.$createElement;return(this._self._c||t)("mark-line",{ref:"markLine",attrs:{rect:this.rect,zoom:this.zoom},on:{adsorb:this.adsorb}})}),[],!1,null,null,null).exports,Oe=n(1030),Ee=n.n(Oe),Ce=null,Le=new(function(){function t(){B()(this,t),this.el=null,this.update={width:Y.b,height:Y.b,top:Y.b,left:Y.b},this.direction={n:!0,s:!0,w:!0,e:!0,nw:!0,ne:!0,sw:!0,se:!0},this.resize=!1,this.move=!1,this.resizeEnable={top:!1,left:!1,width:!1,height:!1},this.executor=null,this.clientX=0,this.clientY=0,this.width=0,this.height=0,this.minWidth=0,this.minHeight=0,this.top=0,this.left=0,this.right=0,this.bottom=0,this.minimum=16}return V()(t,[{key:"setData",value:function(t){var e=t.el,n=t.direction,i=t.minWidth,o=t.minHeight,s=t.update;this.el=e,this.direction=n,this.minWidth=i,this.minHeight=o,this.update=s}},{key:"getLines",value:function(){var t=this.rect(),e=t.top+"px",n=t.left+"px",i=t.width,o=t.height,s=[];return s.push({id:"n-line",style:{top:e,left:n,width:i+"px",height:"1px"}},{id:"e-line",style:{top:e,left:T()(n,10)+i-1+"px",width:"1px",height:o+"px"}},{id:"s-line",style:{top:T()(e,10)+o-1+"px",left:n,width:i+"px",height:"1px"}},{id:"w-line",style:{top:e,left:n,width:"1px",height:o+"px"}}),s}},{key:"getCirculars",value:function(){var t=this,e=this.rect(),n=e.top,i=e.left,o=e.left+e.width,s=e.top+e.height,r=e.width,a=e.height,c=[];return e.width>=this.minimum&&(this.direction.n&&c.push({id:"n-resize",style:{top:n+"px",left:i+r/2+"px",cursor:"n-resize"},mousedown:function(e){var n;u()(n=["top","height"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}}),this.direction.s&&c.push({id:"s-resize",style:{top:s+"px",left:i+r/2+"px",cursor:"s-resize"},mousedown:function(e){t.resizeEnable.height=!0,t.start(e)}})),e.height>=this.minimum&&(this.direction.e&&c.push({id:"e-resize",style:{top:n+a/2+"px",left:o+"px",cursor:"e-resize"},mousedown:function(e){t.resizeEnable.width=!0,t.start(e)}}),this.direction.w&&c.push({id:"w-resize",style:{top:n+a/2+"px",left:i+"px",cursor:"w-resize"},mousedown:function(e){var n;u()(n=["left","width"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}})),this.direction.nw&&c.push({id:"nw-resize",style:{top:n+"px",left:i+"px",cursor:"nw-resize"},mousedown:function(e){var n;u()(n=["top","left","width","height"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}}),this.direction.ne&&c.push({id:"ne-resize",style:{top:n+"px",left:o+"px",cursor:"ne-resize"},mousedown:function(e){var n;u()(n=["top","width","height"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}}),this.direction.se&&c.push({id:"se-resize",style:{top:s+"px",left:o+"px",cursor:"se-resize"},mousedown:function(e){var n;u()(n=["width","height"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}}),this.direction.sw&&c.push({id:"sw-resize",style:{top:s+"px",left:i+"px",cursor:"sw-resize"},mousedown:function(e){var n;u()(n=["left","width","height"]).call(n,(function(e){t.resizeEnable[e]=!0})),t.start(e)}}),c}},{key:"rect",value:function(){var t=this.el,e=t.offsetLeft;return{top:t.offsetTop,left:e,width:t.offsetWidth,height:t.offsetHeight}}},{key:"collectExecutor",value:function(){var t=this,e=[];return this.resizeEnable.top&&e.push((function(e){var n=e.intervalX,i=e.intervalY;return t.update.top(t.top+i+"px"),{intervalX:n,intervalY:-i}})),this.resizeEnable.left&&e.push((function(e){var n=e.intervalX,i=e.intervalY;return t.update.left(t.left+n+"px"),{intervalX:-n,intervalY:i}})),this.resizeEnable.width&&e.push((function(e){var n=e.intervalX,i=e.intervalY,o=t.width+n;return o>t.minWidth?t.update.width(o+"px"):(t.update.width(t.minWidth+"px"),t.resizeEnable.left&&t.update.left(t.right-t.minWidth+"px")),{intervalX:n,intervalY:i}})),this.resizeEnable.height&&e.push((function(e){var n=e.intervalX,i=e.intervalY,o=t.height+i;return o>t.minHeight?t.update.height(o+"px"):(t.update.height(t.minHeight+"px"),t.resizeEnable.top&&t.update.top(t.bottom-t.minHeight+"px")),{intervalX:n,intervalY:i}})),Z.apply(void 0,me()(Ee()(e).call(e)))}},{key:"start",value:function(t){this.resize=!0,this.clientX=t.clientX,this.clientY=t.clientY;var e=this.rect(),n=e.top,i=e.left,o=e.width,s=e.height;this.top=n,this.left=i,this.width=o,this.height=s,this.right=i+o,this.bottom=n+s,this.executor=this.collectExecutor()}},{key:"run",value:function(t,e){this.resize&&(this.move=!0,this.executor({intervalX:t.clientX-this.clientX,intervalY:t.clientY-this.clientY}),e())}},{key:"end",value:function(t,e){var n,i=this;if(this.resize=!1,this.move){this.move=!1,u()(n=["top","left","width","height"]).call(n,(function(t){i.resizeEnable[t]=!1}));var o=this.rect(),s=o.top,r=o.left,a=o.width,c=o.height;e({prev:{top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")},current:{top:"".concat(s,"px"),left:"".concat(r,"px"),width:"".concat(a,"px"),height:"".concat(c,"px")}})}}}]),t}()),$e={name:"Resizer",data:function(){return{lines:[],circulars:[],visible:!1}},mounted:function(){this.addEventListener()},beforeDestroy:function(){this.removeEventListener()},methods:{setData:function(t){var e=t.el,n=t.minWidth,i=t.minHeight,o=t.direction,s=t.update;this.visible=!0,Ce=e,Le.setData({el:e,direction:o,minWidth:n,minHeight:i,update:s}),this.lines=Le.getLines(),this.circulars=Le.getCirculars()},mousedown:function(t){if(Ce){var e=t.target;e===Ce||this.$el.contains(e)||(this.visible=!1,Ce=null)}},mousemove:function(t){var e=this;Le.run(t,(function(){e.lines=Le.getLines(),e.circulars=Le.getCirculars()}))},mouseup:function(t){var e=this;Ce&&Le.end(t,(function(t){var n=t.prev,i=t.current;e.$emit("mouseup",Ce,n,i)}))},addEventListener:function(){Object(Xt.b)(document,"mousedown",this.mousedown),Object(Xt.b)(document,"mousemove",this.mousemove),Object(Xt.b)(document,"mouseup",this.mouseup)},removeEventListener:function(){Object(Xt.a)(document,"mousedown",this.mousedown),Object(Xt.a)(document,"mousemove",this.mousemove),Object(Xt.a)(document,"mouseup",this.mouseup)}}},Me=(n(1035),Object(j.a)($e,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"resizer-container"},[this._l(this.lines,(function(t){return e("div",{key:t.id,staticClass:"resizer-line",style:t.style})})),this._v(" "),this._l(this.circulars,(function(t){return e("div",{key:t.id,staticClass:"resizer-circular",style:t.style,on:{mousedown:t.mousedown}})}))],2)}),[],!1,null,"1d2639ee",null).exports),Ae=[],Ie={name:"CanvasResizer",components:{Resizer:Me},computed:{resizer:function(){return this.$refs.resizer}},mounted:function(){var t=this;Ae.push(Yt.m.$on(Yt.d,(function(e){t.resizer.visible=e}))),Ae.push(Yt.m.$on(Yt.g,(function(){t.resizer.visible=!1}))),Ae.push(Yt.m.$on(Yt.c,(function(e){var n=e[e.id];t.$emit("adjust",{widget:n,el:t.resizer.$el});var i=e.firstChild.style,o=i.minWidth,s=i.minHeight,r=n.props.editable.stretch;t.$refs.resizer.setData({el:e,direction:r,minWidth:T()(o,10),minHeight:T()(s,10),update:{width:function(t){e.firstChild.style.width=t},height:function(t){e.firstChild.style.height=t},top:function(t){e.style.top=t},left:function(t){e.style.left=t}}})})))},beforeDestroy:function(){u()(Ae).call(Ae,(function(t){return t()})),Ae.length=0},methods:{mouseup:function(t,e,n){var i=t[t.id],o=i.zoom,s=function(t){var e=t.widget,n=e.zoom,i=e.container,s=e.component,r=t.rect,a=r.top,c=r.left,l=r.width,u=r.height,h=function(t,e){return Math.floor(T()(t,10)*e)+"px"},f=n/o;i.style.top=h(a,f),i.style.left=h(c,f),s.style.width=h(l,f),s.style.height=h(u,f)};i.container.emit("snapshot",{log:{source:"layouts -> screen -> components -> resizer",reason:"调节组件大小后修改样式并且添加快照"},update:function(t){var e=t.widget,i=e.container,o=e.component;i.style.top=n.top,i.style.left=n.left,o.style.width=n.width,o.style.height=n.height},snapshot:{undo:function(t){var n=t.widget;s({widget:n,rect:e})},redo:function(t){var e=t.widget;s({widget:e,rect:n})},free:function(){e=null,n=null}}})}}},Ne=Object(j.a)(Ie,(function(){var t=this.$createElement;return(this._self._c||t)("resizer",{ref:"resizer",on:{mouseup:this.mouseup}})}),[],!1,null,null,null).exports;function Te(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=Te(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=Te(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var Xe={name:"DropContainer",data:function(){return{visible:!1}},computed:Pe(Pe(Pe({},Object(w.mapGetters)("widget",["widgetMap"])),Object(w.mapGetters)("canvas",["origin"])),Object(w.mapState)("canvas",{zoom:function(t){return t.zoom}})),mounted:function(){Yt.m.$on(Yt.l,this.dragstart),Yt.m.$on(Yt.k,this.dragend)},methods:{dragstart:function(){this.visible=!0},dragend:function(){this.visible=!1},drop:function(t){t.preventDefault();var e=JSON.parse(t.dataTransfer.getData("dataSource")),n=e.id,i=e.offsetX,o=e.offsetY,s=this.widgetMap[n].clone(),r=s.container.style;r.position="absolute",r.top=(t.offsetY-o-this.origin.y)/this.zoom+"px",r.left=(t.offsetX-i-this.origin.x)/this.zoom+"px",s.zoom=this.zoom,X.a.emit(nt.b,{widget:s,log:{source:"layouts -> screen -> components -> canvas -> drop",reason:"添加组件"}})},dragover:function(t){t.preventDefault()}}},Ye=(n(1036),Object(j.a)(Xe,(function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"screen-drop-container",on:{drop:this.drop,dragover:this.dragover}})}),[],!1,null,"98b53832",null).exports),De=n(323),We=n.n(De),Re=n(1037),Ge=n.n(Re),He={},Be={name:"HoverMenu",components:{OrangeMenu:vt},data:function(){return{width:"240px",menus:[],visible:!1,size:A}},mounted:function(){document.body.appendChild(this.$el),Object(Xt.b)(document,"mousedown",this.mousedown)},beforeDestroy:function(){Object(Xt.a)(document,"mousedown",this.mousedown)},methods:{enter:function(t){var e,n=this.calcPosition();u()(e=["top","left","width","height"]).call(e,(function(e){t.style[e]=n[e]}))},leave:function(t){t.style.width=0,t.style.height=0},calcPosition:function(){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight,i=this.$refs["hover-menu"].$el,o=i.offsetWidth,s=i.offsetHeight;return{top:(He.top+s+20>n?n-s-20:He.top)+"px",left:(He.left+o+20>e?He.left-o-4:He.left+4)+"px",width:o+"px",height:s+"px"}},mousedown:function(t){this.$el.contains(t.target)||(this.visible=!1)},setData:function(t){var e,n=this;this.menus=t.menus,this.width=t.width||"240px",this.size=t.size||A,He=t.position,(e=100,new Ge.a((function(t){var n=We()((function(){clearTimeout(n),t()}),e)}))).then((function(){n.visible=!0}))},click:function(){this.visible=!1}}},Ue=(n(1048),Object(j.a)(Be,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"hover-menu"},on:{enter:this.enter,leave:this.leave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"hover-menu-container"},[e("orange-menu",{ref:"hover-menu",attrs:{width:this.width,size:this.size,menus:this.menus},on:{click:this.click}})],1)])}),[],!1,null,"1b3bd5e7",null).exports);function Ve(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=Ve(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=Ve(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var Fe={name:"ScreenCanvas",components:{Grid:se,MouseWidget:ce,MarkLine:je,Resizer:Ne,DropContainer:Ye,HoverMenu:Ue},mixins:[Qt],computed:qe(qe({container:function(){return this.$refs["screen-canvas-container"]},containerStyle:function(){return{top:"".concat(this.origin.y,"px"),left:"".concat(this.origin.x,"px"),width:this.width,height:this.height}},widgets:function(){return X.a.widgets}},Object(w.mapGetters)("canvas",["origin"])),Object(w.mapState)("canvas",{width:function(t){return t.width},height:function(t){return t.height}})),mounted:function(){var t=this;jt.getCanvasData().then((function(e){var n=e.data;n.code?t.$message.error("获取画布数据失败!"):X.a.emit(nt.e,n.data)}))},beforeDestroy:function(){X.a.emit(nt.d)},methods:{onClick:function(){Yt.m.$emit(Yt.a,null)},adjust:function(t){var e=t.widget,n=t.el;e.parent?e.parent.getInstance().$el.appendChild(n):this.container.appendChild(n)}}},Je=(n(1049),n(1050),Object(j.a)(Fe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"screen-canvas-wrap",attrs:{"data-hovermenu":"true"},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClick(e)}}},[n("grid",{style:t.containerStyle}),t._v(" "),n("div",{ref:"screen-canvas-container",staticClass:"screen-canvas-container",style:t.containerStyle,attrs:{"data-hovermenu":"true"},on:{click:function(e){return e.target!==e.currentTarget?null:t.onClick(e)}}},[t._l(t.widgets,(function(t){return n("mouse-widget",{key:t.id,attrs:{"data-source":t,"data-hovermenu":"true"}})})),t._v(" "),n("mark-line",{on:{adjust:t.adjust}}),t._v(" "),n("resizer",{on:{adjust:t.adjust}})],2),t._v(" "),n("drop-container"),t._v(" "),n("hover-menu",{ref:"hoverMenu"})],1)}),[],!1,null,"64b56145",null).exports),Ze=n(151),Ke=Object(Ze.a)(function(){function t(){var e;B()(this,t),this.visible=!0,this.referenceLine=(e={visible:!0},x()(e,le.b.xAxis,[]),x()(e,le.b.yAxis,[]),e)}return V()(t,[{key:"add",value:function(t,e){var n,i;this.referenceLine[t].push(e),this.referenceLine.visible=!0,u()(n=W()(i=this.referenceLine[le.b.xAxis]).call(i,this.referenceLine[le.b.yAxis])).call(n,(function(t){t.visible=!0}))}},{key:"remove",value:function(t,e){"number"==typeof e?Object(Rt.a)(this.referenceLine[t],e):this.referenceLine[t]=[]}},{key:"update",value:function(t){(0,t.update)(this)}}]),t}());var Qe,tn,en,nn,on=n(192),sn=null,rn=(Qe={},x()(Qe,le.b.xAxis,{mousedown:function(t,e,n){e(sn=n.target.parentNode),t.startX=T()(sn.style.left,10),t.clientX=n.clientX},mousemove:function(t,e){var n=e.clientX-t.clientX;sn.style.left=t.startX+n+"px",sn.dataset.num=t.num+Math.floor(n/t.zoom)},mouseup:function(t){t(sn),sn=null},update:function(t,e){t.num=e.dataset.num,t.style.left=e.style.left},offset:function(t,e,n){e.style.left=Math.floor(+e.dataset.num*t.zoom)-n+"px"},zoom:function(t,e,n){e.style.left=Math.floor(e.num*n)-t.offset+"px"}}),x()(Qe,le.b.yAxis,{mousedown:function(t,e,n){e(sn=n.target.parentNode),t.startY=T()(sn.style.top,10),t.clientY=n.clientY},mousemove:function(t,e){var n=e.clientY-t.clientY;sn.style.top=t.startY+n+"px",sn.dataset.num=t.num+Math.floor(n/t.zoom)},mouseup:function(t){t(sn),sn=null},update:function(t,e){t.num=e.dataset.num,t.style.top=e.style.top},offset:function(t,e,n){e.style.top=Math.floor(+e.dataset.num*t.zoom)-n+"px"},zoom:function(t,e,n){e.style.top=Math.floor(e.num*n)-t.offset+"px"}}),Qe),an=(tn={},x()(tn,le.b.xAxis,{mouseenter:function(t,e){sn||(t.offsetX=e.offsetX,t.clientX=e.clientX,t.line.visible=!0,t.line.style={left:t.offsetX+"px",height:t.rect.height},t.line.num=Math.floor((t.offset+t.offsetX)/t.zoom))},mousemove:function(t,e){if(!sn)if(e.offsetY>T()(t.height,10))t.line.visible=!1;else{var n=e.clientX-t.clientX;t.line.style.left=t.offsetX+n+"px",t.line.num=Math.floor((t.offset+t.offsetX+n)/t.zoom)}},boundary:function(t){return{min:Math.floor(t.offset/t.zoom),max:Math.floor((t.offset+t.width)/t.zoom)}}}),x()(tn,le.b.yAxis,{mouseenter:function(t,e){sn||(t.offsetY=e.offsetY,t.clientY=e.clientY,t.line.visible=!0,t.line.style={top:t.offsetY+"px",width:t.rect.width},t.line.num=Math.floor((t.offset+t.offsetY)/t.zoom))},mousemove:function(t,e){if(!sn)if(e.offsetX>T()(t.width,10))t.line.visible=!1;else{var n=e.clientY-t.clientY;t.line.style.top=t.offsetY+n+"px",t.line.num=Math.floor((t.offset+t.offsetY+n)/t.zoom)}},boundary:function(t){return{min:Math.floor(t.offset/t.zoom),max:Math.floor((t.offset+t.height)/t.zoom)}}}),tn),cn=(en={},x()(en,le.b.xAxis,{scaleCount:function(){return Math.ceil(this.canvas.width/this.minimumScaleInterval)},drawScale:function(t,e){this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(t,e),this.ctx.stroke()},drawText:function(t,e){this.ctx.fillStyle="rgb(128, 128, 128)",this.ctx.beginPath(),this.ctx.fillText(e,t+2,2*this.maximumScaleLength)}}),x()(en,le.b.yAxis,{scaleCount:function(){return Math.ceil(this.canvas.height/this.minimumScaleInterval)},drawScale:function(t,e){this.ctx.beginPath(),this.ctx.moveTo(0,t),this.ctx.lineTo(e,t),this.ctx.stroke()},drawText:function(t,e){this.ctx.save(),this.ctx.fillStyle="rgb(128, 128, 128)",this.ctx.translate(2*this.maximumScaleLength,t-2),this.ctx.rotate(-Math.PI/2),this.ctx.beginPath(),this.ctx.fillText(e,0,0),this.ctx.restore()}}),en),ln=function(){function t(e){var n=e.id,i=e.direction;B()(this,t),this.canvas=document.querySelector("#".concat(n)),this.ctx=this.canvas.getContext("2d"),this.direction=i,this.minimumScaleInterval=10,this.maximumScaleInterval=10*this.minimumScaleInterval,this.minimumScaleLength=4,this.maximumScaleLength=2*this.minimumScaleLength,this.zoom=1,this.offset=0,this.residue=0}return V()(t,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=cn[this.direction].scaleCount.call(this),e=0;e<t;e+=1){var n=this.residue+e*this.minimumScaleInterval+.5,i=Math.floor((this.offset+this.residue+e*this.minimumScaleInterval)/this.zoom),o=void 0;i%(this.maximumScaleInterval/this.zoom)==0?(o=this.maximumScaleLength,this.ctx.strokeStyle="rgb(184, 188, 191)",cn[this.direction].drawText.call(this,n,i)):(o=this.minimumScaleLength,this.ctx.strokeStyle="rgb(128, 128, 128)"),cn[this.direction].drawScale.call(this,n,o)}}},{key:"update",value:function(t){var e=t.offset,n=t.zoom;this.zoom=n||this.zoom,this.offset="number"==typeof e?e:this.offset,this.offset<=0?this.residue=Math.abs(this.offset)%this.minimumScaleInterval:this.residue=this.minimumScaleInterval-this.offset%this.minimumScaleInterval,this.draw()}}]),t}(),un=(nn={},x()(nn,"SHOW_RULER",(function(t){return new Q({menu:t,title:"显示标尺",key:"showRuler",icon:{right:{type:"check",visible:!0}},events:{click:function(){this.menu.vm.store.update({update:function(t){t.visible=!1}})}}})})),x()(nn,"SHOW_LINE",(function(t){return new Q({menu:t,title:"显示参考线",key:"showLine",icon:{right:{type:"check",visible:!0}},divider:!0,events:{click:function(){var t=this.menu.vm,e=this.icon.right.visible=!this.icon.right.visible;t.store.update({update:function(t){var n,i,o=t.referenceLine;o.visible=e,u()(n=W()(i=o[le.b.xAxis]).call(i,o[le.b.yAxis])).call(n,(function(t){t.visible=e}))}})}},dataSource:{watch:Y.b},init:function(){var t=this,e=this.menu.vm;this.dataSource.unwatch=e.$watch((function(){return e.store.referenceLine.visible}),(function(e){t.icon.right.visible=e}))},destroy:function(){this.dataSource.unwatch()}})})),x()(nn,"REMOVE_ALL_HORIZONTAL_LINE",(function(t){return new Q({menu:t,title:"删除所有纵向参考线",key:"removeAllHorizontalLine",props:{disabled:!0},events:{click:function(){this.menu.vm.store.remove(le.b.xAxis)}},dataSource:{watch:Y.b},init:function(){var t=this,e=this.menu.vm;this.dataSource.unwatch=e.$watch((function(){return e.store.referenceLine[le.b.xAxis]}),(function(e){t.props.disabled=!e.length}))},destroy:function(){this.dataSource.unwatch()}})})),x()(nn,"REMOVE_ALL_VERTICAL_LINE",(function(t){return new Q({menu:t,title:"删除所有横向参考线",key:"removeAllVerticalLine",props:{disabled:!0},events:{click:function(){this.menu.vm.store.remove(le.b.yAxis)}},dataSource:{watch:Y.b},init:function(){var t=this,e=this.menu.vm;this.dataSource.unwatch=e.$watch((function(){return e.store.referenceLine[le.b.yAxis]}),(function(e){t.props.disabled=!e.length}))},destroy:function(){this.dataSource.unwatch()}})})),nn),hn={mixins:[Kt],mounted:function(){var t=this.MENU_INSTANCE,e=function(t){return function(e){return un[e](t)}}(t),n=e("SHOW_LINE");if(this.direction===le.b.xAxis){var i=e("REMOVE_ALL_HORIZONTAL_LINE");t.setData({items:[n,i]})}else{var o=e("REMOVE_ALL_VERTICAL_LINE");t.setData({items:[n,o]})}},methods:{contextmenu:function(t){if(this.$el.contains(t.target)){var e=this.MENU_INSTANCE;this.store.emit("CONTEXTMENU",{menus:e.items,position:{top:t.clientY,left:t.clientX},size:I,width:"140px"})}}}},fn={name:"ReferenceLine",inject:["direction"],props:{type:{type:String,default:"fixed"},dataSource:{type:Object,required:!0}}},dn=(n(1051),Object(j.a)(fn,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["ruler-reference-line",this.direction,this.type],style:this.dataSource.style,attrs:{"data-id":this.dataSource.id,"data-num":this.dataSource.num}},[e("span",{staticClass:"move",attrs:{"data-action":"move"}}),this._v(" "),e("orange-icon",{staticClass:"remove",attrs:{type:"icon-clear","data-action":"remove"}})],1)}),[],!1,null,"4c929c05",null).exports),pn=n(150),mn=n.n(pn),vn=n(149),gn=n.n(vn),bn={name:"ReferenceLineList",components:{ReferenceLine:dn},inject:["store","direction"],props:{boundary:{type:Object,required:!0},offset:{type:Number,default:0},zoom:{type:Number,default:1}},data:function(){return{num:0,move:!1,startX:0,startY:0,clientX:0,clientY:0,toggle:null}},computed:{lines:function(){return this.store.referenceLine[this.direction]}},watch:{offset:function(t){var e,n=this;u()(e=this.getLineEls()).call(e,(function(e){rn[n.direction].offset(n,e,t)}))},zoom:function(t){var e=this;this.store.update({update:function(n){var i,o=n.referenceLine;u()(i=o[e.direction]).call(i,(function(n){rn[e.direction].zoom(e,n,t)}))}})}},mounted:function(){this.store.on("SCROLL_END",this.scrollEnd),this.addEventListener()},beforeDestroyed:function(){this.store.off("SCROLL_END",this.scrollEnd),this.removeEventListener()},methods:{addEventListener:function(){Object(Xt.b)(document,"mousemove",this.mousemove),Object(Xt.b)(document,"mouseup",this.mouseup)},removeEventListener:function(){Object(Xt.a)(document,"mousemove",this.mousemove),Object(Xt.a)(document,"mouseup",this.mouseup)},mousedown:function(t){var e=this;"move"===t.target.dataset.action&&(this.move=!0,rn[this.direction].mousedown(this,(function(t){e.num=+t.dataset.num,e.toggle=function(e){t.style.display=e?"":"none"},e.store.on("MOVE_RULER_LINE_VISIBLE",e.toggle)}),t))},mousemove:function(t){this.move&&rn[this.direction].mousemove(this,t)},mouseup:function(){var t=this;this.move&&(this.move=!1,this.store.off("MOVE_RULER_LINE_VISIBLE",this.toggle),rn[this.direction].mouseup((function(e){var n,i=e.dataset.num,o=e.dataset.id;i<t.boundary.min||i>t.boundary.max?t.store.remove(t.direction,gn()(n=t.lines).call(n,(function(t){return t.id===o}))):t.store.update({update:function(n){var i,s=n.referenceLine,r=mn()(i=s[t.direction]).call(i,(function(t){return t.id===o}));rn[t.direction].update(r,e)}})})))},remove:function(t){var e;if("remove"===t.target.dataset.action){var n=t.target.parentNode.dataset.id;this.store.remove(this.direction,gn()(e=this.lines).call(e,(function(t){return t.id===n})))}},getLineEls:function(){var t;return this.$refs.line?zt()(t=this.$refs.line).call(t,(function(t){return t.$el})):[]},scrollEnd:function(){var t=this,e=this.getLineEls();e.length&&this.store.update({update:function(n){var i,o=n.referenceLine;u()(i=o[t.direction]).call(i,(function(n,i){rn[t.direction].update(n,e[i])}))}})}}};function yn(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=yn(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=yn(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var wn={name:"RulerBar",components:{ReferenceLine:dn,ReferenceLineList:Object(j.a)(bn,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{on:{mousedown:this.mousedown,click:this.remove}},this._l(this.lines,(function(t){return e("reference-line",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"item.visible"}],key:t.id,ref:"line",refInFor:!0,attrs:{type:"fixed","data-source":t}})})),1)}),[],!1,null,null,null).exports},mixins:[hn],inject:["store"],provide:function(){return{direction:this.direction}},props:{direction:{type:String,default:le.b.xAxis},offset:{type:Number,default:0},zoom:{type:Number,default:1},rect:{type:Object,default:function(){return{width:0,height:0}}}},data:function(){return{id:"ruler-canvas-".concat(Object(on.a)()),ruler:null,width:0,height:0,offsetX:0,offsetY:0,clientX:0,clientY:0,line:{visible:!1,num:0,style:{}}}},computed:{boundary:function(){return an[this.direction].boundary(this)}},watch:{offset:function(t){this.update({offset:t})},zoom:function(t){this.update({zoom:t})}},mounted:function(){this.initData()},methods:{initData:function(){var t=this,e=this.$el,n=e.offsetWidth,i=e.offsetHeight;this.width=n,this.height=i,this.ruler=new ln({id:this.id,direction:this.direction}),this.$nextTick((function(){t.ruler.draw()}))},mouseenter:function(t){an[this.direction].mouseenter(this,t)},mousemove:function(t){an[this.direction].mousemove(this,t)},mouseleave:function(){this.line.visible=!1},update:function(t){this.ruler.update(t)},add:function(){this.store.add(this.direction,{id:Object(on.a)(),visible:!0,num:this.line.num,style:xn({},this.line.style)})}}},_n=(n(1052),{name:"Ruler",components:{HoverMenu:Ue,Bar:Object(j.a)(wn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["ruler-bar-container",t.direction]},[n("div",{staticStyle:{width:"100%",height:"100%"},on:{mouseenter:t.mouseenter,mousemove:t.mousemove,mouseleave:t.mouseleave,click:t.add}},[n("canvas",{attrs:{id:t.id,width:t.width,height:t.height}}),t._v(" "),n("reference-line",{directives:[{name:"show",rawName:"v-show",value:t.line.visible,expression:"line.visible"}],attrs:{type:"active","data-source":t.line}})],1),t._v(" "),n("reference-line-list",{attrs:{boundary:t.boundary,offset:t.offset,zoom:t.zoom}})],1)}),[],!1,null,"9fa8ba2e",null).exports},provide:function(){return{store:this.store}},props:{offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},zoom:{type:Number,default:1},rect:{type:Object,default:function(){return{width:0,height:0}}},size:{type:String,default:"16px"}},data:function(){return{store:new Ke,direction:{yAxis:le.b.yAxis}}},mounted:function(){this.store.on("CONTEXTMENU",this.contextmenu)},beforeDestroyed:function(){this.store.on("CONTEXTMENU",this.contextmenu)},methods:{back:function(){this.$emit("back")},scrollEnd:function(){this.store.emit("SCROLL_END")},contextmenu:function(t){this.$refs.hoverMenu.setData(t)},mouseenter:function(){this.store.emit("MOVE_RULER_LINE_VISIBLE",!1)},mouseleave:function(){this.store.emit("MOVE_RULER_LINE_VISIBLE",!0)}}});n(1053);function kn(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=kn(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=kn(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var Sn={name:"ScreenRuler",components:{Ruler:Object(j.a)(_n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.store.visible?n("div",{staticClass:"ruler-container"},[n("bar",{style:{left:t.size,height:t.size},attrs:{offset:t.offsetX,zoom:t.zoom,rect:t.rect}}),t._v(" "),n("bar",{style:{top:t.size,width:t.size},attrs:{offset:t.offsetY,zoom:t.zoom,rect:t.rect,direction:t.direction.yAxis}}),t._v(" "),n("a-tooltip",{attrs:{placement:"right"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v("点我回原点")])]},proxy:!0}],null,!1,2691044310)},[t._v(" "),n("span",{staticClass:"back-btn",style:{width:t.size,height:t.size},on:{click:t.back,mouseenter:t.mouseenter,mouseleave:t.mouseleave}})]),t._v(" "),n("hover-menu",{ref:"hoverMenu"})],1):t._e()}),[],!1,null,"c1880eae",null).exports},data:function(){return{size:16,offsetX:0,offsetY:0}},computed:zn(zn(zn({rect:function(){var t=this.screen.view;return{width:t.width,height:t.height}}},Object(w.mapGetters)("canvas",["origin"])),Object(w.mapState)("global",{screen:function(t){return t.screen}})),Object(w.mapState)("canvas",{zoom:function(t){return t.zoom}})),watch:{zoom:function(){this.back()},origin:function(){this.back()}},mounted:function(){Yt.m.$on(Yt.i,this.scroll),Yt.m.$on(Yt.j,this.scrollEnd),this.back()},beforeDestroy:function(){Yt.m.$off(Yt.i,this.scroll),Yt.m.$off(Yt.j,this.scrollEnd)},methods:{scroll:function(t){var e=t.target;this.offsetX=e.scrollLeft-(this.origin.x-this.size),this.offsetY=e.scrollTop-(this.origin.y-this.size)},scrollEnd:function(){this.$refs.ruler.scrollEnd()},back:function(){this.$emit("scroll-to",this.origin.x-this.size,this.origin.y-this.size)}}};function jn(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=jn(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=jn(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var En,Cn,Ln={name:"WorkspaceScreen",components:{ScreenCanvas:Je,ScreenRuler:Object(j.a)(Sn,(function(){var t=this.$createElement;return(this._self._c||t)("ruler",{ref:"ruler",attrs:{"offset-x":this.offsetX,"offset-y":this.offsetY,rect:this.rect,zoom:this.zoom,size:this.size+"px"},on:{back:this.back}})}),[],!1,null,null,null).exports},mixins:[{methods:{scroll:function(t){Yt.m.$emit(Yt.i,t)},scrollEnd:function(){Yt.m.$emit(Yt.j)},scrollTo:function(t,e){this.$refs.scrollbar.scrollTo(t,e)}}}],computed:On({},Object(w.mapState)("global",{screen:function(t){return t.screen}})),mounted:function(){var t=this.$el,e=t.offsetWidth,n=t.offsetHeight;this[tt.a]({log:{source:"WorkspaceScreen -> mounted",reason:"更新screen视图的宽高尺寸"},update:function(t){var i=t.screen.view;i.width=e+"px",i.height=n+"px"}})},methods:On({},Object(w.mapMutations)("global",[tt.a]))},$n=(n(1054),Object(j.a)(Ln,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workspace-screen-view"},[e("el-scrollbar",{ref:"scrollbar",on:{scroll:this.scroll,"scroll-end":this.scrollEnd}},[e("div",{staticClass:"workspace-screen-container",style:{width:this.screen.container.width,height:this.screen.container.height}},[e("screen-canvas")],1)]),this._v(" "),e("screen-ruler",{on:{"scroll-to":this.scrollTo}})],1)}),[],!1,null,"19792a27",null).exports),Mn=n(1001),An=n.n(Mn),In=n(275),Nn=n.n(In),Tn=n(223),Pn=n.n(Tn),Xn=function(t,e,n,i,o){return function(){var s=Object(Y.c)(t,this),r=i(n(s[e]),this.zoom);return o.call(this),r}},Yn=function(t,e,n,i,o){return function(s){var r=this;this.update({log:{source:"layouts -> panel -> right -> store",reason:"修改组件样式和属性",detial:{keys:t,attr:e,value:s}},update:function(){Object(Y.c)(t,r)[e]=n(i(s,r.zoom)),o.call(r)}})}},Dn=function(t){return t.int?{get:function(t){return T()(t,10)},set:function(t){return t+"px"}}:t.float?{get:function(t){return Pn()(t,10)},set:function(t){return t+"px"}}:t.json?{get:function(t){return Pt()(t,null,4)},set:function(t){return JSON.parse(t)}}:{get:function(t){return t},set:function(t){return t}}},Wn=function(t){var e=An()(t),n=t.attr,i=t.alias,o=void 0===i?"":i,s=t.translate,r=void 0===s?{}:s,a=t.monitor,c=void 0===a?{}:a;return{keys:e,attr:n,alias:o,filter:Dn(r),computed:r.zoom?{set:function(t,e){return Math.floor(t*e)},get:function(t,e){return Math.floor(t/e)}}:{set:function(t){return t},get:function(t){return t}},monitor:{set:c.set||Y.b,get:c.get||Y.b}}},Rn=[Wn({keys:["container","style"],attr:"top",translate:{int:!0,zoom:!0}}),Wn({keys:["container","style"],attr:"left",translate:{int:!0,zoom:!0}}),Wn({keys:["component","style"],attr:"width",translate:{int:!0,zoom:!0}}),Wn({keys:["component","style"],attr:"height",translate:{int:!0,zoom:!0}})],Gn=[Wn({keys:["component","style"],attr:"fontSize",translate:{int:!0},monitor:{set:function(){this.dataSource.emit("fontSize",this.fontSize)}}}),Wn({keys:["component","style"],attr:"color"}),Wn({keys:["component","style"],attr:"fontWeight"}),Wn({keys:["component","style"],attr:"fontStyle"}),Wn({keys:["component","style"],attr:"textDecoration"}),Wn({keys:["component","style"],attr:"textAlign"}),Wn({keys:["component","style"],attr:"alignItems"}),Wn({keys:["component","style"],attr:"letterSpacing",translate:{float:!0}}),Wn({keys:["component","props"],attr:"lineHeight",translate:{int:!0}}),Wn({keys:["component","props"],attr:"margin",translate:{int:!0}})],Hn=[Wn({keys:["component","style"],attr:"borderRadius",translate:{int:!0,zoom:!0}}),Wn({keys:["fill","style"],attr:"backgroundColor"}),Wn({keys:["stroke","style"],attr:"borderColor"}),Wn({keys:["stroke","style"],attr:"borderStyle"}),Wn({keys:["stroke","style"],attr:"borderWidth",translate:{int:!0,zoom:!0}})],Bn=[Wn({keys:["shadow"],attr:"shadowColor"}),Wn({keys:["shadow"],attr:"shadowOffsetX",translate:{int:!0,zoom:!0}}),Wn({keys:["shadow"],attr:"shadowOffsetY",translate:{int:!0,zoom:!0}}),Wn({keys:["shadow"],attr:"shadowBlur",translate:{int:!0,zoom:!0}}),Wn({keys:["shadow"],attr:"shadowSpread",translate:{int:!0,zoom:!0}})],Un=[Wn({keys:["component","props"],attr:"type",alias:"iconType"}),Wn({keys:["component","style"],attr:"color",alias:"iconColor",monitor:{set:function(){this.dataSource.emit("color",this.iconColor)}}}),Wn({keys:["component","props"],attr:"theme",alias:"iconTheme"})],Vn=[Wn({keys:["props"],attr:"bind"}),Wn({keys:["props"],attr:"value"}),Wn({keys:["props"],attr:"options",translate:{json:!0}})],qn=[],Fn=function(){function t(){B()(this,t),this.dataSource=null,this.initEventListener()}return V()(t,[{key:"initEventListener",value:function(){var t=this;qn.push(X.a.on(nt.c,(function(){t.dataSource=null}))),qn.push(Yt.m.$on(Yt.a,(function(e){t.dataSource=e})))}},{key:"update",value:function(t){X.a.emit(nt.h,t)}},{key:"destroy",value:function(){u()(qn).call(qn,(function(t){return t()})),qn.length=0,this.dataSource=null}},{key:"container",get:function(){return this.dataSource.container}},{key:"component",get:function(){return this.dataSource.component}},{key:"zoom",get:function(){return this.dataSource.zoom}},{key:"fill",get:function(){return Nn()(this.component.props)}},{key:"stroke",get:function(){return this.component.props.stroke}},{key:"shadow",get:function(){return this.component.props.shadow}},{key:"props",get:function(){return this.dataSource.props}},{key:"events",get:function(){return this.dataSource.events}}]),t}();u()(En=W()(Cn=[]).call(Cn,me()(Rn),me()(Gn),me()(Hn),me()(Bn),me()(Un),me()(Vn))).call(En,(function(t){var e=An()(t),n=t.attr,i=t.alias,o=p()(t),s=t.computed,r=t.monitor;Object(Y.a)(Fn.prototype,i||n,{get:Xn(e,n,o.get,s.get,r.get),set:Yn(e,n,o.set,s.set,r.set)})}));function Jn(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=Jn(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=Jn(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var Kn={name:"ProjectCanvas",computed:Zn({},Object(w.mapState)("canvas",{width:function(t){var e=t.width,n=t.zoom;return Math.floor(T()(e,10)/n)},height:function(t){var e=t.height,n=t.zoom;return Math.floor(T()(e,10)/n)}})),methods:Zn({onChange:function(t,e){this[et.a]({log:{source:"layouts -> panel -> right -> components -> project -> components -> canvas",reason:"调整画布大小"},update:function(n){n[t]="".concat(Math.floor(e*n.zoom),"px")}})}},Object(w.mapMutations)("canvas",[et.a]))},Qn=(n(1058),Object(j.a)(Kn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-item-container"},[n("p",{staticClass:"setting-item-title"},[t._v("\n    画布\n  ")]),t._v(" "),n("div",{staticClass:"setting-item-block"},[n("orange-input-number",{attrs:{value:t.width,label:"宽",hover:!1,min:320,max:1920},on:{change:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.onChange.apply(void 0,["width"].concat(i))}}}),t._v(" "),n("a-icon",{attrs:{type:"close"}}),t._v(" "),n("orange-input-number",{attrs:{value:t.height,label:"高",hover:!1,min:568,max:1080},on:{change:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.onChange.apply(void 0,["height"].concat(i))}}})],1)])}),[],!1,null,"b917a154",null).exports);function ti(t,e){var n=b()(t);if(v.a){var i=v()(t);e&&(i=p()(i).call(i,(function(e){return f()(t,e).enumerable}))),n.push.apply(n,i)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=ti(Object(i),!0)).call(n,(function(e){x()(t,e,i[e])}));else if(c.a)r()(t,c()(i));else{var s;u()(s=ti(Object(i))).call(s,(function(e){o()(t,e,f()(i,e))}))}}return t}var ni={name:"ProjectGrid",computed:ei({},Object(w.mapState)("canvas",{grid:function(t){return t.grid}})),methods:ei({onChange:function(t){var e=t.target;this[et.a]({log:{source:"layouts -> panel -> right -> components -> project -> components -> grid",reason:"控制网格显示"},update:function(t){t.grid=e.checked}})}},Object(w.mapMutations)("canvas",[et.a]))},ii=(n(1059),{name:"Project",components:{ProjectCanvas:Qn,ProjectGrid:Object(j.a)(ni,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-item-container"},[e("p",{staticClass:"setting-item-title"},[this._v("\n    网格\n  ")]),this._v(" "),e("div",[e("a-checkbox",{staticClass:"orange-checkbox",attrs:{checked:this.grid},on:{change:this.onChange}})],1)])}),[],!1,null,"4e53a15a",null).exports}}),oi=Object(j.a)(ii,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("project-canvas"),this._v(" "),e("project-grid")],1)}),[],!1,null,null,null).exports,si={name:"ApperanceGeneral",inject:["store"],computed:{items:function(){var t=this,e=[],n=this.store.dataSource.props.editable,i=n.stretch,o=n.move;return e.push({props:{label:"X",value:this.store.left,min:-1e3,max:3e3,disabled:!o},update:function(e){t.store.left=e}},{props:{label:"Y",value:this.store.top,min:-1e3,max:3e3,disabled:!o},update:function(e){t.store.top=e}},{props:{label:"W",value:this.store.width,min:8,max:3e3,disabled:!(i.w||i.e)},update:function(e){t.store.width=e}},{props:{label:"H",value:this.store.height,min:8,max:3e3,disabled:!(i.n||i.s)},update:function(e){t.store.height=e}}),e}}},ri=(n(1060),Object(j.a)(si,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"general-container"},[n("p",{staticClass:"general-title"},[t._v("\n    通用\n  ")]),t._v(" "),n("div",{staticClass:"general-block"},t._l(t.items,(function(e){return n("orange-input-number",t._b({key:e.label,style:{marginBottom:"4px"},attrs:{size:"small"},on:{change:e.update}},"orange-input-number",e.props,!1))})),1)])}),[],!1,null,"22828077",null).exports),ai={name:"TextFontSize",inject:["store"],data:function(){var t;return{options:zt()(t=[12,14,16,18,20,28,36,48]).call(t,(function(t){return{label:t,value:t}}))}},methods:{onInput:function(t){this.store.fontSize=t}}},ci=Object(j.a)(ai,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("orange-input-select",{attrs:{value:t.store.fontSize,min:12,max:48},on:{input:t.onInput}},t._l(t.options,(function(e){return n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v("\n    "+t._s(e.label)+"\n  ")])})),1)}),[],!1,null,null,null).exports,li={name:"TextColor",inject:["store"],methods:{onInput:function(t){this.store.color=t}}},ui=Object(j.a)(li,(function(){var t=this.$createElement;return(this._self._c||t)("color-picker",{attrs:{value:this.store.color},on:{input:this.onInput}})}),[],!1,null,null,null).exports,hi={name:"TextDecoration",inject:["store"],computed:{items:function(){var t=this,e=[];return e.push({type:"bold",tip:"加粗",active:"bold"===this.store.fontWeight,update:function(e){t.store.fontWeight=e?"normal":"bold"}},{type:"italic",tip:"斜体",active:"italic"===this.store.fontStyle,update:function(e){t.store.fontStyle=e?"normal":"italic"}},{type:"underline",tip:"下划线",active:"underline"===this.store.textDecoration,update:function(e){t.store.textDecoration=e?"none":"underline"}},{type:"strikethrough",tip:"删除线",active:"line-through"===this.store.textDecoration,update:function(e){t.store.textDecoration=e?"none":"line-through"}}),e}}},fi=(n(1061),Object(j.a)(hi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"text-operator-list"},t._l(t.items,(function(e){return n("li",{key:e.type,class:["text-operator-item",e.active&&"active"],on:{click:function(t){return e.update(e.active)}}},[n("a-tooltip",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(e.tip))])]},proxy:!0}],null,!0)},[t._v(" "),n("a-icon",{attrs:{type:e.type}})],1)],1)})),0)}),[],!1,null,"601b031c",null).exports),di={name:"TextAlign",inject:["store"],computed:{items:function(){var t=this,e=this.store.textAlign,n=[];return n.push({type:"align-left",tip:"左对齐",active:"left"===e,update:function(e){t.store.textAlign=e?"inherit":"left"}},{type:"align-center",tip:"水平居中",active:"center"===e,update:function(e){t.store.textAlign=e?"inherit":"center"}},{type:"align-right",tip:"右对齐",active:"right"===e,update:function(e){t.store.textAlign=e?"inherit":"right"}}),n}}},pi=(n(1062),Object(j.a)(di,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"text-operator-list"},t._l(t.items,(function(e){return n("li",{key:e.type,class:["text-operator-item",e.active&&"active"],on:{click:function(t){return e.update(e.active)}}},[n("a-tooltip",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(e.tip))])]},proxy:!0}],null,!0)},[t._v(" "),n("a-icon",{attrs:{type:e.type}})],1)],1)})),0)}),[],!1,null,"449f6014",null).exports),mi={name:"TextVertical",inject:["store"],computed:{items:function(){var t=this,e=this.store.alignItems,n=[];return n.push({type:"vertical-align-top",tip:"顶对齐",active:"flex-start"===e,update:function(e){t.store.alignItems=e?"normal":"flex-start"}},{type:"vertical-align-middle",tip:"垂直对齐",active:"center"===e,update:function(e){t.store.alignItems=e?"normal":"center"}},{type:"vertical-align-bottom",tip:"底对齐",active:"flex-end"===e,update:function(e){t.store.alignItems=e?"normal":"flex-end"}}),n}}},vi=(n(1063),Object(j.a)(mi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"text-operator-list"},t._l(t.items,(function(e){return n("li",{key:e.type,class:["text-operator-item",e.active&&"active"],on:{click:function(t){return e.update(e.active)}}},[n("a-tooltip",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(e.tip))])]},proxy:!0}],null,!0)},[t._v(" "),n("a-icon",{attrs:{type:e.type}})],1)],1)})),0)}),[],!1,null,"4881777d",null).exports),gi={name:"TextInterval",inject:["store"],computed:{items:function(){var t=this,e=this.store,n=e.letterSpacing,i=e.lineHeight,o=e.margin,s=[];return s.push({icon:"icon-zijianju",tip:"字间距",props:{label:!0,type:"float",value:n,min:0,max:100,step:.1,precision:1},update:function(e){t.store.letterSpacing=e}},{icon:"icon-hangjianju",tip:"行距",props:{label:!0,type:"int",value:i,min:0,max:100,step:1,precision:0},update:function(e){t.store.lineHeight=e}},{icon:"icon-duanla",tip:"段落",props:{label:!0,type:"int",value:o,min:0,max:100,step:1,precision:0},update:function(e){t.store.margin=e}}),s}}},bi=(n(1064),Object(j.a)(gi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-interval-container"},t._l(t.items,(function(e){return n("a-tooltip",{key:e.icon,attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(e.tip))])]},proxy:!0}],null,!0)},[t._v(" "),n("orange-input-number",t._b({attrs:{size:"small"},on:{change:e.update},scopedSlots:t._u([{key:"label",fn:function(){return[n("orange-icon",{attrs:{type:e.icon}})]},proxy:!0}],null,!0)},"orange-input-number",e.props,!1))],1)})),1)}),[],!1,null,"465c9c66",null).exports),yi={name:"ApperanceText",data:function(){return{items:[[ci,ui],[fi,pi],[vi],[bi]]}}},xi=(n(1065),Object(j.a)(yi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.items,(function(e,i){return n("div",{key:i,class:["apperance-text-row-container","col-"+e.length]},t._l(e,(function(t){return n("div",{key:t.name},[n(t,{tag:"component"})],1)})),0)})),0)}),[],!1,null,"5e5dc94b",null).exports),wi={name:"BorderRadius",inject:["store"],data:function(){return{items:["icon-yuanjiao1"]}},methods:{onChange:function(t){this.store.borderRadius=t}}},_i=(n(1066),Object(j.a)(wi,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-item-container"},[e("ul",{staticClass:"border-radius-list"},this._l(this.items,(function(t){return e("li",{key:t,class:["border-radius-item","active"]},[e("orange-icon",{attrs:{type:t}})],1)})),0),this._v(" "),e("orange-input-number",{attrs:{value:this.store.borderRadius,min:0,max:1e3,size:"small"},on:{change:this.onChange}})],1)}),[],!1,null,"463ec554",null).exports),ki={name:"BorderFill",inject:["store"],methods:{onChange:function(t){var e=this,n=t.target.checked;this.store.update({log:{source:"layouts -> panel -> right -> components -> apperance -> components -> border -> components -> fill",reason:"是否显示方框背景",detail:{open:n}},update:function(){Nn()(e.store).open=n}})},onInput:function(t){this.store.backgroundColor=t}}},zi=(n(1067),Object(j.a)(ki,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border-item-container"},[e("a-checkbox",{staticClass:"orange-checkbox",attrs:{checked:this.store.fill.open},on:{change:this.onChange}}),this._v(" "),e("color-picker",{attrs:{value:this.store.backgroundColor},on:{input:this.onInput}}),this._v(" "),e("span",{staticClass:"border-item-text"},[this._v("填充")])],1)}),[],!1,null,"11cf5d32",null).exports),Si={name:"BorderStroke",inject:["store"],data:function(){var t;return{items:["solid","dashed","dotted"],options:zt()(t=[0,1,2,3,4,5,6,7,8,9]).call(t,(function(t){return{label:t,value:t}}))}},methods:{onChange:function(t){var e=this,n=t.target.checked;this.store.update({log:{source:"layouts -> panel -> right -> components -> apperance -> components -> border -> components -> stroke",reason:"是否显示方框描边",detail:{open:n}},update:function(){e.store.stroke.open=n}})},update:function(t,e){this.store[t]=e}}},ji=(n(1068),Object(j.a)(Si,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-item-container"},[n("div",[n("a-checkbox",{staticClass:"orange-checkbox",attrs:{checked:t.store.stroke.open},on:{change:t.onChange}}),t._v(" "),n("color-picker",{attrs:{value:t.store.borderColor},on:{input:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.update.apply(void 0,["borderColor"].concat(i))}}}),t._v(" "),n("span",{staticClass:"border-item-text"},[t._v("描边")])],1),t._v(" "),n("div",[n("a-select",{staticClass:"orange-select border-style-select",attrs:{value:t.store.borderStyle,size:"small","dropdown-class-name":"orange-select-dropdown"},on:{select:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.update.apply(void 0,["borderStyle"].concat(i))}}},t._l(t.items,(function(t){return n("a-select-option",{key:t,attrs:{value:t}},[n("div",{class:"border-style-"+t})])})),1),t._v(" "),n("orange-input-select",{attrs:{width:"50px",value:t.store.borderWidth,min:0,max:1e3},on:{input:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.update.apply(void 0,["borderWidth"].concat(i))}}},t._l(t.options,(function(e){return n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),1)],1)])}),[],!1,null,"9522aa02",null).exports),Oi={name:"BorderShadow",inject:["store"],computed:{items:function(){var t=[],e=this.store,n=e.shadowOffsetX,i=e.shadowOffsetY,o=e.shadowBlur,s=e.shadowSpread;return t.push({key:"shadowOffsetX",label:"X",props:{value:n,min:-100,max:100}},{key:"shadowOffsetY",label:"Y",props:{value:i,min:-100,max:100}},{key:"shadowBlur",label:"模糊",props:{value:o,min:0,max:100}},{key:"shadowSpread",label:"扩散",props:{value:s,min:-100,max:100}}),t}},methods:{onChange:function(t){var e=this,n=t.target.checked;this.store.update({log:{source:"layouts -> panel -> right -> components -> apperance -> components -> border -> components -> shadow",reason:"是否显示方框阴影",detail:{open:n}},update:function(){e.store.shadow.open=n}})},update:function(t,e){this.store[t]=e}}},Ei=(n(1069),Object(j.a)(Oi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-item-container"},[n("div",[n("a-checkbox",{staticClass:"orange-checkbox",attrs:{checked:t.store.shadow.open},on:{change:t.onChange}}),t._v(" "),n("color-picker",{attrs:{value:t.store.shadowColor},on:{input:function(e){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.update.apply(void 0,["shadowColor"].concat(i))}}}),t._v(" "),n("span",{staticClass:"border-item-text"},[t._v("阴影")])],1),t._v(" "),n("ul",{staticClass:"border-shadow-input-number-list"},t._l(t.items,(function(e){return n("li",{key:e.key,staticClass:"border-shadow-input-number-item"},[n("orange-input-number",t._b({attrs:{hover:!1,size:"small"},on:{change:function(n){for(var i=arguments.length,o=Array(i);i--;)o[i]=arguments[i];return t.update.apply(void 0,[e.key].concat(o))}}},"orange-input-number",e.props,!1)),t._v(" "),n("span",{staticClass:"border-shaow-input-number-label"},[t._v(t._s(e.label))])],1)})),0)])}),[],!1,null,"cfa1aa7c",null).exports),Ci={name:"ApperanceBorder",data:function(){return{items:[_i,zi,ji,Ei]}}},Li=Object(j.a)(Ci,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._l(this.items,(function(t){return e(t,{key:t.name,tag:"componnet"})})),1)}),[],!1,null,null,null).exports,$i={name:"IconType",inject:["store"],data:function(){return{items:["star","step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","double-right","double-left","vertical-left","vertical-right","vertical-align-top","vertical-align-middle","vertical-align-bottom","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","up-square","down-square","left-square","right-square","login","logout","menu-fold","menu-unfold","border-bottom","border-horizontal","border-inner","border-outer","border-left","border-right","border-top","border-verticle","pic-center","pic-left","pic-right","radius-bottomleft","radius-bottomright","radius-upleft","radius-upright","fullscreen","fullscreen-exit"]}},methods:{onChange:function(t){this.store.iconType=t}}},Mi=(n(1070),n(1071),Object(j.a)($i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-popover",{attrs:{trigger:"click",placement:"bottom","overlay-class-name":"orange-popover icon-popover"},scopedSlots:t._u([{key:"content",fn:function(){return[n("el-scrollbar",[n("ul",{staticClass:"icon-list"},t._l(t.items,(function(e){return n("li",{key:e,staticClass:"icon-item",on:{click:function(n){return t.onChange(e)}}},[n("a-icon",{attrs:{type:e}})],1)})),0)])]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"icon-type-container"},[n("a-icon",{attrs:{type:t.store.iconType}}),t._v(" "),n("span",{staticClass:"text-ellipsis"},[t._v(t._s(t.store.iconType))])],1)])}),[],!1,null,"0ec3a54e",null).exports),Ai={name:"IconColor",inject:["store"],methods:{onInput:function(t){this.store.iconColor=t}}},Ii=Object(j.a)(Ai,(function(){var t=this.$createElement;return(this._self._c||t)("color-picker",{attrs:{value:this.store.iconColor},on:{input:this.onInput}})}),[],!1,null,null,null).exports,Ni={name:"IconTheme",inject:["store"],data:function(){return{options:[{value:"filled",label:"实心"},{value:"outlined",label:"描线"},{value:"twoTone",label:"双色"}]}},methods:{update:function(t){this.store.iconTheme=t}}},Ti=(n(1072),{name:"ApperanceIcon",components:{IconType:Mi,IconColor:Ii,IconTheme:Object(j.a)(Ni,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon-theme-container"},[e("span",{staticClass:"icon-theme-text"},[this._v("主题")]),this._v(" "),e("a-select",{staticClass:"orange-select",attrs:{value:this.store.iconTheme,size:"small",options:this.options,"dropdown-class-name":"orange-select-dropdown"},on:{select:this.update}})],1)}),[],!1,null,"38abac08",null).exports}}),Pi=(n(1073),Object(j.a)(Ti,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"icon-item-container"},[e("icon-type"),this._v(" "),e("icon-color")],1),this._v(" "),e("icon-theme")],1)}),[],!1,null,"f69a3d98",null).exports),Xi={name:"Apperance",components:{ApperanceGeneral:ri,ApperanceText:xi,ApperanceBorder:Li,ApperanceIcon:Pi},inject:["store"],computed:{items:function(){var t=[],e=this.store.dataSource.props.editable;return e.text&&t.push({key:"text",header:"文本",component:xi}),e.border&&t.push({key:"border",header:"边框",component:Li}),e.icon&&t.push({key:"icon",header:"图标",component:Pi}),t}}},Yi=(n(1074),Object(j.a)(Xi,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"apperance-container"},[e("apperance-general"),this._v(" "),e("a-collapse",{attrs:{"active-key":this.items.map((function(t){return t.key})),"expand-icon-position":"right"}},this._l(this.items,(function(t){return e("a-collapse-panel",{key:t.key,attrs:{header:t.header}},[e(t.component,{tag:"component"})],1)})),1)],1)}),[],!1,null,null,null).exports),Di={name:"Attribute",inject:["store"],data:function(){return{code:"",visible:!1}},computed:{items:function(){var t=this,e=[];return void 0!==G()(this.store)&&e.push({key:"bind",label:"数据源",is:"a-input",tip:"v-model绑定的数据源",props:{class:"orange-input",value:G()(this.store),size:"small"},events:{change:function(e){t.store.bind=e.target.value}}}),void 0!==this.store.value&&e.push({key:"value",label:"value",is:"a-input",tip:"提交给后端的表单项的值",props:{class:"orange-input",value:this.store.value,size:"small"},events:{change:function(e){t.store.value=e.target.value}}}),void 0!==this.store.options&&e.push({key:"options",label:"数据源",is:"a-icon",tip:"设置表单项的数据源",props:{type:"edit"},events:{click:function(){t.code=t.store.options,t.visible=!0}}}),e}},methods:{ensure:function(){try{this.store.options=this.code,this.visible=!1}catch(t){this.$message.error("JSON格式错误!")}}}},Wi=(n(1075),Object(j.a)(Di,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attribute-container"},[t._l(t.items,(function(e){return n("div",{key:e.key,staticClass:"attribute-item-container"},[n("a-tooltip",{attrs:{placement:"left"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v(t._s(e.tip))])]},proxy:!0}],null,!0)},[t._v(" "),n("span",{staticClass:"attribute-item-text"},[t._v(t._s(e.label))])]),t._v(" "),n("div",{staticClass:"attribute-item-input-container"},[n(e.is,t._g(t._b({tag:"component"},"component",e.props,!1),e.events))],1)],1)})),t._v(" "),t.items.length?t._e():n("a-empty",{attrs:{description:"暂无相关数据"}}),t._v(" "),n("a-modal",{attrs:{title:"代码",width:528,"dialog-class":"orange-modal"},on:{ok:t.ensure},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("code-editor",{attrs:{config:{mode:"application/json"}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],2)}),[],!1,null,"358e7d46",null).exports),Ri={name:"Event",inject:["store"],data:function(){return{visible:!1,code:"",active:null,options:[{label:"单击",value:"click"},{label:"双击",value:"dblclick"}]}},computed:{disabled:function(){return!this.store.props.editable.event}},methods:{onClick:function(){var t=this;this.store.update({log:{sourece:"layouts -> panel -> right -> components -> event",reason:"新增事件"},update:function(){t.store.events.push({id:Object(on.a)(),event:"click",code:"(function (vm) {\n  console.log('hello world')\n})(vm)"})}})},onSelect:function(t,e){this.store.update({log:{sourece:"layouts -> panel -> right -> components -> event",reason:"修改事件类型"},update:function(){t.event=e}})},edit:function(t){this.code=t.code,this.active=t,this.visible=!0},remove:function(t){var e=this;this.store.update({log:{sourece:"layouts -> panel -> right -> components -> event",reason:"删除事件"},update:function(){Object(Rt.a)(e.store.events,t)}})},ensure:function(){var t=this;this.visible=!1,this.store.update({log:{sourece:"layouts -> panel -> right -> components -> event",reason:"修改事件代码"},update:function(){t.active.code=t.code}})}}},Gi=(n(1076),{name:"WorkspaceRightPanel",components:{OrangeProject:oi,OrangeApperance:Yi,OrangeAttribute:Wi,OrangeEvent:Object(j.a)(Ri,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-container"},[n("a-button",{attrs:{type:"primary",size:"small",disabled:t.disabled},on:{click:t.onClick}},[t._v("\n    添加事件\n  ")]),t._v(" "),n("ul",{staticClass:"event-list"},t._l(t.store.events,(function(e){return n("li",{key:e.id,staticClass:"event-item"},[n("div",{staticClass:"event-header-container"},[n("span",{staticClass:"event-text"},[t._v("事件")]),t._v(" "),n("ul",{staticClass:"event-operator-list"},[n("li",{staticClass:"event-operator-item",on:{click:function(n){return t.edit(e)}}},[n("a-tooltip",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v("编辑")])]},proxy:!0}],null,!0)},[t._v(" "),n("a-icon",{attrs:{type:"edit"}})],1)],1),t._v(" "),n("li",{staticClass:"event-operator-item",on:{click:function(n){return t.remove(e)}}},[n("a-tooltip",{attrs:{placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v("删除")])]},proxy:!0}],null,!0)},[t._v(" "),n("a-icon",{attrs:{type:"delete"}})],1)],1)])]),t._v(" "),n("a-select",{staticClass:"orange-select",attrs:{value:e.event,options:t.options,"dropdown-class-name":"orange-select-dropdown"},on:{select:function(n){for(var i=arguments.length,o=Array(i);i--;)o[i]=arguments[i];return t.onSelect.apply(void 0,[e].concat(o))}}})],1)})),0),t._v(" "),n("a-modal",{attrs:{title:"代码",width:528,"dialog-class":"orange-modal"},on:{ok:t.ensure},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("code-editor",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1)}),[],!1,null,"fe10bc12",null).exports},provide:function(){return{store:this.store}},data:function(){return{store:new Fn}},computed:{items:function(){var t=[];return this.store.dataSource?t.push({is:"orange-apperance",key:"apperance",tab:"外观"},{is:"orange-attribute",key:"attribute",tab:"属性"},{is:"orange-event",key:"event",tab:"事件"}):t.push({is:"orange-project",key:"project",tab:"项目设置"}),t}},beforeDestroy:function(){this.store.destroy()}}),Hi=(n(1077),n(1078),{name:"WorkSpace",components:{WorkspaceHeader:At,WorkspaceLeftPanel:Jt,WorkspaceScreen:$n,WorkspaceRightPanel:Object(j.a)(Gi,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workspace-right-panel"},[e("a-tabs",this._l(this.items,(function(t){return e("a-tab-pane",{key:t.key,attrs:{tab:t.tab}},[e("el-scrollbar",[e(t.is,{tag:"component"})],1)],1)})),1)],1)}),[],!1,null,"65729207",null).exports}}),Bi=(n(1079),n(1080),Object(j.a)(Hi,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workspace-container"},[e("workspace-header"),this._v(" "),e("div",{staticClass:"workspace-main clearfix"},[e("workspace-left-panel"),this._v(" "),e("workspace-screen"),this._v(" "),e("workspace-right-panel")],1),this._v(" "),e("router-view")],1)}),[],!1,null,"18a6d72e",null));e.default=Bi.exports},941:function(t,e,n){},942:function(t,e,n){},943:function(t,e,n){},944:function(t,e,n){},945:function(t,e,n){},946:function(t,e,n){},947:function(t,e,n){},948:function(t,e,n){},949:function(t,e,n){},950:function(t,e,n){},951:function(t,e,n){},952:function(t,e,n){},954:function(t,e,n){},955:function(t,e,n){},956:function(t,e,n){},958:function(t,e,n){},959:function(t,e,n){},960:function(t,e,n){},961:function(t,e,n){},962:function(t,e,n){},963:function(t,e,n){},964:function(t,e,n){},965:function(t,e,n){},966:function(t,e,n){},967:function(t,e,n){},968:function(t,e,n){},969:function(t,e,n){},970:function(t,e,n){},971:function(t,e,n){},972:function(t,e,n){},973:function(t,e,n){},974:function(t,e,n){},975:function(t,e,n){},976:function(t,e,n){},977:function(t,e,n){},978:function(t,e,n){},979:function(t,e,n){},980:function(t,e,n){},981:function(t,e,n){},982:function(t,e,n){},983:function(t,e,n){},984:function(t,e,n){},985:function(t,e,n){},986:function(t,e,n){},987:function(t,e,n){}}]);
//# sourceMappingURL=1.27bdd2.js.map